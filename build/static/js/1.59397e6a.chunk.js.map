{"version":3,"sources":["lib/webgl-utils.js","lib/webgl-debug.js","lib/cuon-utils.js","demo/util.js","spring/normalize-css-color.js","shared.js","spring/handleValue.js","spring/spring.js","spring/index.js"],"names":["WebGLUtils","makeFailHTML","msg","GET_A_WEBGL_BROWSER","OTHER_PROBLEM","create3DContext","canvas","opt_attribs","names","context","ii","length","getContext","e","setupWebGL","opt_onError","container","document","getElementsByTagName","str","window","WebGLRenderingContext","innerHTML","addEventListener","event","statusMessage","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","element","setTimeout","cancelAnimationFrame","cancelRequestAnimationFrame","webkitCancelAnimationFrame","webkitCancelRequestAnimationFrame","mozCancelAnimationFrame","mozCancelRequestAnimationFrame","msCancelAnimationFrame","msCancelRequestAnimationFrame","oCancelAnimationFrame","oCancelRequestAnimationFrame","clearTimeout","WebGLDebugUtils","log","console","glValidEnumContexts","enable","0","disable","getParameter","drawArrays","drawElements","2","createShader","getShaderParameter","1","getProgramParameter","getVertexAttrib","vertexAttribPointer","bindTexture","activeTexture","getTexParameter","texParameterf","texParameteri","texImage2D","6","7","texSubImage2D","copyTexImage2D","copyTexSubImage2D","generateMipmap","bindBuffer","bufferData","bufferSubData","getBufferParameter","pixelStorei","readPixels","4","5","bindRenderbuffer","bindFramebuffer","checkFramebufferStatus","framebufferRenderbuffer","framebufferTexture2D","getFramebufferAttachmentParameter","getRenderbufferParameter","renderbufferStorage","clear","depthFunc","blendFunc","blendFuncSeparate","3","blendEquation","blendEquationSeparate","stencilFunc","stencilFuncSeparate","stencilMaskSeparate","stencilOp","stencilOpSeparate","cullFace","frontFace","glEnums","init","ctx","propertyName","checkInit","glEnumToString","value","name","undefined","toString","glFunctionArgToString","functionName","argumentIndex","funcInfo","resetToInitialState","numAttribs","MAX_VERTEX_ATTRIBS","tmp","createBuffer","ARRAY_BUFFER","disableVertexAttribArray","FLOAT","vertexAttrib1f","deleteBuffer","numTextureUnits","MAX_TEXTURE_IMAGE_UNITS","TEXTURE0","TEXTURE_CUBE_MAP","TEXTURE_2D","useProgram","ELEMENT_ARRAY_BUFFER","FRAMEBUFFER","RENDERBUFFER","BLEND","CULL_FACE","DEPTH_TEST","DITHER","SCISSOR_TEST","blendColor","FUNC_ADD","ONE","ZERO","clearColor","clearDepth","clearStencil","colorMask","BACK","LESS","depthMask","depthRange","CCW","hint","GENERATE_MIPMAP_HINT","DONT_CARE","lineWidth","PACK_ALIGNMENT","UNPACK_ALIGNMENT","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_COLORSPACE_CONVERSION_WEBGL","BROWSER_DEFAULT_WEBGL","polygonOffset","sampleCoverage","scissor","width","height","ALWAYS","stencilMask","KEEP","viewport","clientWidth","clientHeight","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","getError","mightBeEnum","makeDebugContext","opt_onErrorFunc","err","args","argStr","glErrorShadow","makeErrorWrapper","result","apply","arguments","wrapper","NO_ERROR","makeLostContextSimulatingContext","wrapper_","contextId_","contextLost_","resourceDb_","onLost_","onRestored_","nextOnRestored_","glErrorShadow_","makeLostContextWrapper","f","arg","obj","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLTexture","__webglDebugContextLostId__","checkResources","INVALID_OPERATION","makeWebGLContextEvent","loseContext","k","Object","keys","clearErrors","CONTEXT_LOST_WEBGL","restoreContext","resource","deleteFramebuffer","deleteProgram","deleteRenderbuffer","deleteShader","deleteTexture","freeResources","creationFunctions","push","functionsThatShouldReturnNull","isFunctions","wrapEvent","listener","info","handleEvent","FRAMEBUFFER_UNSUPPORTED","getAttribLocation","getVertexAttribOffset","isContextLost","registerOnContextLostListener","registerOnContextRestoredListener","initShaders","gl","vshader","fshader","program","vertexShader","loadShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","LINK_STATUS","error","getProgramInfoLog","type","source","shader","shaderSource","compileShader","COMPILE_STATUS","getShaderInfoLog","getWebGLContext","opt_debug","__webpack_require__","d","__webpack_exports__","glsl","loadImageList","getPosition","createVertexList","createRotateZMatrix","createTranslateMatrix","createScaleMatrix","x","loadImage","src","Promise","resolve","reject","image","Image","onload","onerror","list","all","map","getX","rect","clientX","left","getY","clientY","top","getBoundingClientRect","Float32Array","flat","Infinity","createMatrix","sourceList","data","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","array","return","radian","Math","PI","sinB","sin","cosB","cos","y","z","scaleX","scaleY","scaleZ","hue2rgb","p","q","t","hslToRgb","h","s","l","r","g","b","round","NUMBER","PERCENTAGE","call","arrayLike","Array","prototype","slice","join","matchers","rgb","RegExp","rgba","hsl","hsla","hex3","hex4","hex6","hex8","parse255","int","parseInt","parse360","parseFloat","parse1","num","parsePercentage","colorNames","transparent","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","mapValue","reduce","key","isPlainObject","proto","getPrototypeOf","colorToRgba","input","int32Color","color","match","exec","hasOwnProperty","normalizeColor","a","concat","stringShapeRegex","colorRegex","colorNamesRegex","convertColor","replace","rgbaRegex","rgbaReplacement","_","p1","p2","p3","p4","empty","constant","handleValue","fromValue","toValue","fromType","toType","handleNumberValue","handleStringValue","handleObjectValue","isArray","handleArrayValue","Error","diffValue","ratio","fromArray","toArray","diffArray","index","Number","handlerList","handler","fromObject","toObject","handlerObject","spring","options","Observable","create","observer","complete","objA","objB","keysA","keysB","i","shallowEqual","updater","instance","WobbleSpring","objectSpread","start","onUpdate","currentValue","onStop","stop","springSubject","lastValue","subject","ReplaySubject","updateLastValue","startValue","spring$","pipe","startWith","switchMap","_ref","nextOptions","tap","innerSubject","SpringSubject"],"mappings":"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","file":"static/js/1.59397e6a.chunk.js","sourcesContent":["/*\r\n * Copyright 2010, Google Inc.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are\r\n * met:\r\n *\r\n *     * Redistributions of source code must retain the above copyright\r\n * notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above\r\n * copyright notice, this list of conditions and the following disclaimer\r\n * in the documentation and/or other materials provided with the\r\n * distribution.\r\n *     * Neither the name of Google Inc. nor the names of its\r\n * contributors may be used to endorse or promote products derived from\r\n * this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n/**\r\n * @fileoverview This file contains functions every webgl program will need\r\n * a version of one way or another.\r\n *\r\n * Instead of setting up a context manually it is recommended to\r\n * use. This will check for success or failure. On failure it\r\n * will attempt to present an approriate message to the user.\r\n *\r\n *       gl = WebGLUtils.setupWebGL(canvas);\r\n *\r\n * For animated WebGL apps use of setTimeout or setInterval are\r\n * discouraged. It is recommended you structure your rendering\r\n * loop like this.\r\n *\r\n *       function render() {\r\n *         window.requestAnimationFrame(render, canvas);\r\n *\r\n *         // do rendering\r\n *         ...\r\n *       }\r\n *       render();\r\n *\r\n * This will call your rendering function up to the refresh rate\r\n * of your display but will stop rendering if your app is not\r\n * visible.\r\n */\r\n\r\nexport const WebGLUtils = (function() {\r\n  /**\r\n   * Creates the HTLM for a failure message\r\n   * @param {string} canvasContainerId id of container of th\r\n   *        canvas.\r\n   * @return {string} The html.\r\n   */\r\n  var makeFailHTML = function(msg) {\r\n    return (\r\n      '' +\r\n      '<div style=\"margin: auto; width:500px;z-index:10000;margin-top:20em;text-align:center;\">' +\r\n      msg +\r\n      '</div>'\r\n    )\r\n    return (\r\n      '' +\r\n      '<table style=\"background-color: #8CE; width: 100%; height: 100%;\"><tr>' +\r\n      '<td align=\"center\">' +\r\n      '<div style=\"display: table-cell; vertical-align: middle;\">' +\r\n      '<div style=\"\">' +\r\n      msg +\r\n      '</div>' +\r\n      '</div>' +\r\n      '</td></tr></table>'\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Mesasge for getting a webgl browser\r\n   * @type {string}\r\n   */\r\n  var GET_A_WEBGL_BROWSER =\r\n    '' +\r\n    'This page requires a browser that supports WebGL.<br/>' +\r\n    '<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>'\r\n\r\n  /**\r\n   * Mesasge for need better hardware\r\n   * @type {string}\r\n   */\r\n  var OTHER_PROBLEM =\r\n    '' +\r\n    \"It doesn't appear your computer can support WebGL.<br/>\" +\r\n    '<a href=\"http://get.webgl.org\">Click here for more information.</a>'\r\n\r\n  /**\r\n   * Creates a webgl context. If creation fails it will\r\n   * change the contents of the container of the <canvas>\r\n   * tag to an error message with the correct links for WebGL.\r\n   * @param {Element} canvas. The canvas element to create a\r\n   *     context from.\r\n   * @param {WebGLContextCreationAttirbutes} opt_attribs Any\r\n   *     creation attributes you want to pass in.\r\n   * @param {function:(msg)} opt_onError An function to call\r\n   *     if there is an error during creation.\r\n   * @return {WebGLRenderingContext} The created context.\r\n   */\r\n  var setupWebGL = function(canvas, opt_attribs, opt_onError) {\r\n    function handleCreationError(msg) {\r\n      var container = document.getElementsByTagName('body')[0]\r\n      //var container = canvas.parentNode;\r\n      if (container) {\r\n        var str = window.WebGLRenderingContext\r\n          ? OTHER_PROBLEM\r\n          : GET_A_WEBGL_BROWSER\r\n        if (msg) {\r\n          str += '<br/><br/>Status: ' + msg\r\n        }\r\n        container.innerHTML = makeFailHTML(str)\r\n      }\r\n    }\r\n\r\n    opt_onError = opt_onError || handleCreationError\r\n\r\n    if (canvas.addEventListener) {\r\n      canvas.addEventListener(\r\n        'webglcontextcreationerror',\r\n        function(event) {\r\n          opt_onError(event.statusMessage)\r\n        },\r\n        false\r\n      )\r\n    }\r\n    var context = create3DContext(canvas, opt_attribs)\r\n    if (!context) {\r\n      if (!window.WebGLRenderingContext) {\r\n        opt_onError('')\r\n      } else {\r\n        opt_onError('')\r\n      }\r\n    }\r\n\r\n    return context\r\n  }\r\n\r\n  /**\r\n   * Creates a webgl context.\r\n   * @param {!Canvas} canvas The canvas tag to get context\r\n   *     from. If one is not passed in one will be created.\r\n   * @return {!WebGLContext} The created context.\r\n   */\r\n  var create3DContext = function(canvas, opt_attribs) {\r\n    var names = ['webgl', 'experimental-webgl', 'webkit-3d', 'moz-webgl']\r\n    var context = null\r\n    for (var ii = 0; ii < names.length; ++ii) {\r\n      try {\r\n        context = canvas.getContext(names[ii], opt_attribs)\r\n      } catch (e) {}\r\n      if (context) {\r\n        break\r\n      }\r\n    }\r\n    return context\r\n  }\r\n\r\n  return {\r\n    create3DContext: create3DContext,\r\n    setupWebGL: setupWebGL\r\n  }\r\n})()\r\n\r\n/**\r\n * Provides requestAnimationFrame in a cross browser\r\n * way.\r\n */\r\nif (!window.requestAnimationFrame) {\r\n  window.requestAnimationFrame = (function() {\r\n    return (\r\n      window.requestAnimationFrame ||\r\n      window.webkitRequestAnimationFrame ||\r\n      window.mozRequestAnimationFrame ||\r\n      window.oRequestAnimationFrame ||\r\n      window.msRequestAnimationFrame ||\r\n      function(\r\n        /* function FrameRequestCallback */ callback,\r\n        /* DOMElement Element */ element\r\n      ) {\r\n        window.setTimeout(callback, 1000 / 60)\r\n      }\r\n    )\r\n  })()\r\n}\r\n\r\n/** * ERRATA: 'cancelRequestAnimationFrame' renamed to 'cancelAnimationFrame' to reflect an update to the W3C Animation-Timing Spec.\r\n *\r\n * Cancels an animation frame request.\r\n * Checks for cross-browser support, falls back to clearTimeout.\r\n * @param {number}  Animation frame request. */\r\nif (!window.cancelAnimationFrame) {\r\n  window.cancelAnimationFrame =\r\n    window.cancelRequestAnimationFrame ||\r\n    window.webkitCancelAnimationFrame ||\r\n    window.webkitCancelRequestAnimationFrame ||\r\n    window.mozCancelAnimationFrame ||\r\n    window.mozCancelRequestAnimationFrame ||\r\n    window.msCancelAnimationFrame ||\r\n    window.msCancelRequestAnimationFrame ||\r\n    window.oCancelAnimationFrame ||\r\n    window.oCancelRequestAnimationFrame ||\r\n    window.clearTimeout\r\n}\r\n","//Copyright (c) 2009 The Chromium Authors. All rights reserved.\r\n//Use of this source code is governed by a BSD-style license that can be\r\n//found in the LICENSE file.\r\n\r\n// Various functions for helping debug WebGL apps.\r\n\r\nexport const WebGLDebugUtils = function() {\r\n\r\n/**\r\n * Wrapped logging function.\r\n * @param {string} msg Message to log.\r\n */\r\nvar log = function(msg) {\r\n  if (window.console && window.console.log) {\r\n    window.console.log(msg);\r\n  }\r\n};\r\n\r\n/**\r\n * Which arguements are enums.\r\n * @type {!Object.<number, string>}\r\n */\r\nvar glValidEnumContexts = {\r\n\r\n  // Generic setters and getters\r\n\r\n  'enable': { 0:true },\r\n  'disable': { 0:true },\r\n  'getParameter': { 0:true },\r\n\r\n  // Rendering\r\n\r\n  'drawArrays': { 0:true },\r\n  'drawElements': { 0:true, 2:true },\r\n\r\n  // Shaders\r\n\r\n  'createShader': { 0:true },\r\n  'getShaderParameter': { 1:true },\r\n  'getProgramParameter': { 1:true },\r\n\r\n  // Vertex attributes\r\n\r\n  'getVertexAttrib': { 1:true },\r\n  'vertexAttribPointer': { 2:true },\r\n\r\n  // Textures\r\n\r\n  'bindTexture': { 0:true },\r\n  'activeTexture': { 0:true },\r\n  'getTexParameter': { 0:true, 1:true },\r\n  'texParameterf': { 0:true, 1:true },\r\n  'texParameteri': { 0:true, 1:true, 2:true },\r\n  'texImage2D': { 0:true, 2:true, 6:true, 7:true },\r\n  'texSubImage2D': { 0:true, 6:true, 7:true },\r\n  'copyTexImage2D': { 0:true, 2:true },\r\n  'copyTexSubImage2D': { 0:true },\r\n  'generateMipmap': { 0:true },\r\n\r\n  // Buffer objects\r\n\r\n  'bindBuffer': { 0:true },\r\n  'bufferData': { 0:true, 2:true },\r\n  'bufferSubData': { 0:true },\r\n  'getBufferParameter': { 0:true, 1:true },\r\n\r\n  // Renderbuffers and framebuffers\r\n\r\n  'pixelStorei': { 0:true, 1:true },\r\n  'readPixels': { 4:true, 5:true },\r\n  'bindRenderbuffer': { 0:true },\r\n  'bindFramebuffer': { 0:true },\r\n  'checkFramebufferStatus': { 0:true },\r\n  'framebufferRenderbuffer': { 0:true, 1:true, 2:true },\r\n  'framebufferTexture2D': { 0:true, 1:true, 2:true },\r\n  'getFramebufferAttachmentParameter': { 0:true, 1:true, 2:true },\r\n  'getRenderbufferParameter': { 0:true, 1:true },\r\n  'renderbufferStorage': { 0:true, 1:true },\r\n\r\n  // Frame buffer operations (clear, blend, depth test, stencil)\r\n\r\n  'clear': { 0:true },\r\n  'depthFunc': { 0:true },\r\n  'blendFunc': { 0:true, 1:true },\r\n  'blendFuncSeparate': { 0:true, 1:true, 2:true, 3:true },\r\n  'blendEquation': { 0:true },\r\n  'blendEquationSeparate': { 0:true, 1:true },\r\n  'stencilFunc': { 0:true },\r\n  'stencilFuncSeparate': { 0:true, 1:true },\r\n  'stencilMaskSeparate': { 0:true },\r\n  'stencilOp': { 0:true, 1:true, 2:true },\r\n  'stencilOpSeparate': { 0:true, 1:true, 2:true, 3:true },\r\n\r\n  // Culling\r\n\r\n  'cullFace': { 0:true },\r\n  'frontFace': { 0:true },\r\n};\r\n\r\n/**\r\n * Map of numbers to names.\r\n * @type {Object}\r\n */\r\nvar glEnums = null;\r\n\r\n/**\r\n * Initializes this module. Safe to call more than once.\r\n * @param {!WebGLRenderingContext} ctx A WebGL context. If\r\n *    you have more than one context it doesn't matter which one\r\n *    you pass in, it is only used to pull out constants.\r\n */\r\nfunction init(ctx) {\r\n  if (glEnums == null) {\r\n    glEnums = { };\r\n    for (var propertyName in ctx) {\r\n      if (typeof ctx[propertyName] == 'number') {\r\n        glEnums[ctx[propertyName]] = propertyName;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Checks the utils have been initialized.\r\n */\r\nfunction checkInit() {\r\n  if (glEnums == null) {\r\n    throw 'WebGLDebugUtils.init(ctx) not called';\r\n  }\r\n}\r\n\r\n/**\r\n * Returns true or false if value matches any WebGL enum\r\n * @param {*} value Value to check if it might be an enum.\r\n * @return {boolean} True if value matches one of the WebGL defined enums\r\n */\r\nfunction mightBeEnum(value) {\r\n  checkInit();\r\n  return (glEnums[value] !== undefined);\r\n}\r\n\r\n/**\r\n * Gets an string version of an WebGL enum.\r\n *\r\n * Example:\r\n *   var str = WebGLDebugUtil.glEnumToString(ctx.getError());\r\n *\r\n * @param {number} value Value to return an enum for\r\n * @return {string} The string version of the enum.\r\n */\r\nfunction glEnumToString(value) {\r\n  checkInit();\r\n  var name = glEnums[value];\r\n  return (name !== undefined) ? name :\r\n      (\"*UNKNOWN WebGL ENUM (0x\" + value.toString(16) + \")\");\r\n}\r\n\r\n/**\r\n * Returns the string version of a WebGL argument.\r\n * Attempts to convert enum arguments to strings.\r\n * @param {string} functionName the name of the WebGL function.\r\n * @param {number} argumentIndx the index of the argument.\r\n * @param {*} value The value of the argument.\r\n * @return {string} The value as a string.\r\n */\r\nfunction glFunctionArgToString(functionName, argumentIndex, value) {\r\n  var funcInfo = glValidEnumContexts[functionName];\r\n  if (funcInfo !== undefined) {\r\n    if (funcInfo[argumentIndex]) {\r\n      return glEnumToString(value);\r\n    }\r\n  }\r\n  return value.toString();\r\n}\r\n\r\n/**\r\n * Given a WebGL context returns a wrapped context that calls\r\n * gl.getError after every command and calls a function if the\r\n * result is not gl.NO_ERROR.\r\n *\r\n * @param {!WebGLRenderingContext} ctx The webgl context to\r\n *        wrap.\r\n * @param {!function(err, funcName, args): void} opt_onErrorFunc\r\n *        The function to call when gl.getError returns an\r\n *        error. If not specified the default function calls\r\n *        console.log with a message.\r\n */\r\nfunction makeDebugContext(ctx, opt_onErrorFunc) {\r\n  init(ctx);\r\n  opt_onErrorFunc = opt_onErrorFunc || function(err, functionName, args) {\r\n        // apparently we can't do args.join(\",\");\r\n        var argStr = \"\";\r\n        for (var ii = 0; ii < args.length; ++ii) {\r\n          argStr += ((ii == 0) ? '' : ', ') +\r\n              glFunctionArgToString(functionName, ii, args[ii]);\r\n        }\r\n        log(\"WebGL error \"+ glEnumToString(err) + \" in \"+ functionName +\r\n            \"(\" + argStr + \")\");\r\n      };\r\n\r\n  // Holds booleans for each GL error so after we get the error ourselves\r\n  // we can still return it to the client app.\r\n  var glErrorShadow = { };\r\n\r\n  // Makes a function that calls a WebGL function and then calls getError.\r\n  function makeErrorWrapper(ctx, functionName) {\r\n    return function() {\r\n      var result = ctx[functionName].apply(ctx, arguments);\r\n      var err = ctx.getError();\r\n      if (err != 0) {\r\n        glErrorShadow[err] = true;\r\n        opt_onErrorFunc(err, functionName, arguments);\r\n      }\r\n      return result;\r\n    };\r\n  }\r\n\r\n  // Make a an object that has a copy of every property of the WebGL context\r\n  // but wraps all functions.\r\n  var wrapper = {};\r\n  for (var propertyName in ctx) {\r\n    if (typeof ctx[propertyName] == 'function') {\r\n       wrapper[propertyName] = makeErrorWrapper(ctx, propertyName);\r\n     } else {\r\n       wrapper[propertyName] = ctx[propertyName];\r\n     }\r\n  }\r\n\r\n  // Override the getError function with one that returns our saved results.\r\n  wrapper.getError = function() {\r\n    for (var err in glErrorShadow) {\r\n      if (glErrorShadow[err]) {\r\n        glErrorShadow[err] = false;\r\n        return err;\r\n      }\r\n    }\r\n    return ctx.NO_ERROR;\r\n  };\r\n\r\n  return wrapper;\r\n}\r\n\r\nfunction resetToInitialState(ctx) {\r\n  var numAttribs = ctx.getParameter(ctx.MAX_VERTEX_ATTRIBS);\r\n  var tmp = ctx.createBuffer();\r\n  ctx.bindBuffer(ctx.ARRAY_BUFFER, tmp);\r\n  for (var ii = 0; ii < numAttribs; ++ii) {\r\n    ctx.disableVertexAttribArray(ii);\r\n    ctx.vertexAttribPointer(ii, 4, ctx.FLOAT, false, 0, 0);\r\n    ctx.vertexAttrib1f(ii, 0);\r\n  }\r\n  ctx.deleteBuffer(tmp);\r\n\r\n  var numTextureUnits = ctx.getParameter(ctx.MAX_TEXTURE_IMAGE_UNITS);\r\n  for (var ii = 0; ii < numTextureUnits; ++ii) {\r\n    ctx.activeTexture(ctx.TEXTURE0 + ii);\r\n    ctx.bindTexture(ctx.TEXTURE_CUBE_MAP, null);\r\n    ctx.bindTexture(ctx.TEXTURE_2D, null);\r\n  }\r\n\r\n  ctx.activeTexture(ctx.TEXTURE0);\r\n  ctx.useProgram(null);\r\n  ctx.bindBuffer(ctx.ARRAY_BUFFER, null);\r\n  ctx.bindBuffer(ctx.ELEMENT_ARRAY_BUFFER, null);\r\n  ctx.bindFramebuffer(ctx.FRAMEBUFFER, null);\r\n  ctx.bindRenderbuffer(ctx.RENDERBUFFER, null);\r\n  ctx.disable(ctx.BLEND);\r\n  ctx.disable(ctx.CULL_FACE);\r\n  ctx.disable(ctx.DEPTH_TEST);\r\n  ctx.disable(ctx.DITHER);\r\n  ctx.disable(ctx.SCISSOR_TEST);\r\n  ctx.blendColor(0, 0, 0, 0);\r\n  ctx.blendEquation(ctx.FUNC_ADD);\r\n  ctx.blendFunc(ctx.ONE, ctx.ZERO);\r\n  ctx.clearColor(0, 0, 0, 0);\r\n  ctx.clearDepth(1);\r\n  ctx.clearStencil(-1);\r\n  ctx.colorMask(true, true, true, true);\r\n  ctx.cullFace(ctx.BACK);\r\n  ctx.depthFunc(ctx.LESS);\r\n  ctx.depthMask(true);\r\n  ctx.depthRange(0, 1);\r\n  ctx.frontFace(ctx.CCW);\r\n  ctx.hint(ctx.GENERATE_MIPMAP_HINT, ctx.DONT_CARE);\r\n  ctx.lineWidth(1);\r\n  ctx.pixelStorei(ctx.PACK_ALIGNMENT, 4);\r\n  ctx.pixelStorei(ctx.UNPACK_ALIGNMENT, 4);\r\n  ctx.pixelStorei(ctx.UNPACK_FLIP_Y_WEBGL, false);\r\n  ctx.pixelStorei(ctx.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\r\n  // TODO: Delete this IF.\r\n  if (ctx.UNPACK_COLORSPACE_CONVERSION_WEBGL) {\r\n    ctx.pixelStorei(ctx.UNPACK_COLORSPACE_CONVERSION_WEBGL, ctx.BROWSER_DEFAULT_WEBGL);\r\n  }\r\n  ctx.polygonOffset(0, 0);\r\n  ctx.sampleCoverage(1, false);\r\n  ctx.scissor(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n  ctx.stencilFunc(ctx.ALWAYS, 0, 0xFFFFFFFF);\r\n  ctx.stencilMask(0xFFFFFFFF);\r\n  ctx.stencilOp(ctx.KEEP, ctx.KEEP, ctx.KEEP);\r\n  ctx.viewport(0, 0, ctx.canvas.clientWidth, ctx.canvas.clientHeight);\r\n  ctx.clear(ctx.COLOR_BUFFER_BIT | ctx.DEPTH_BUFFER_BIT | ctx.STENCIL_BUFFER_BIT);\r\n\r\n  // TODO: This should NOT be needed but Firefox fails with 'hint'\r\n  while(ctx.getError());\r\n}\r\n\r\nfunction makeLostContextSimulatingContext(ctx) {\r\n  var wrapper_ = {};\r\n  var contextId_ = 1;\r\n  var contextLost_ = false;\r\n  var resourceId_ = 0;\r\n  var resourceDb_ = [];\r\n  var onLost_ = undefined;\r\n  var onRestored_ = undefined;\r\n  var nextOnRestored_ = undefined;\r\n\r\n  // Holds booleans for each GL error so can simulate errors.\r\n  var glErrorShadow_ = { };\r\n\r\n  function isWebGLObject(obj) {\r\n    //return false;\r\n    return (obj instanceof WebGLBuffer ||\r\n            obj instanceof WebGLFramebuffer ||\r\n            obj instanceof WebGLProgram ||\r\n            obj instanceof WebGLRenderbuffer ||\r\n            obj instanceof WebGLShader ||\r\n            obj instanceof WebGLTexture);\r\n  }\r\n\r\n  function checkResources(args) {\r\n    for (var ii = 0; ii < args.length; ++ii) {\r\n      var arg = args[ii];\r\n      if (isWebGLObject(arg)) {\r\n        return arg.__webglDebugContextLostId__ == contextId_;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function clearErrors() {\r\n    var k = Object.keys(glErrorShadow_);\r\n    for (var ii = 0; ii < k.length; ++ii) {\r\n      // delete glErrorShdow_[k];\r\n    }\r\n  }\r\n\r\n  // Makes a function that simulates WebGL when out of context.\r\n  function makeLostContextWrapper(ctx, functionName) {\r\n    var f = ctx[functionName];\r\n    return function() {\r\n      // Only call the functions if the context is not lost.\r\n      if (!contextLost_) {\r\n        if (!checkResources(arguments)) {\r\n          glErrorShadow_[ctx.INVALID_OPERATION] = true;\r\n          return;\r\n        }\r\n        var result = f.apply(ctx, arguments);\r\n        return result;\r\n      }\r\n    };\r\n  }\r\n\r\n  for (var propertyName in ctx) {\r\n    if (typeof ctx[propertyName] == 'function') {\r\n       wrapper_[propertyName] = makeLostContextWrapper(ctx, propertyName);\r\n     } else {\r\n       wrapper_[propertyName] = ctx[propertyName];\r\n     }\r\n  }\r\n\r\n  function makeWebGLContextEvent(statusMessage) {\r\n    return {statusMessage: statusMessage};\r\n  }\r\n\r\n  function freeResources() {\r\n    for (var ii = 0; ii < resourceDb_.length; ++ii) {\r\n      var resource = resourceDb_[ii];\r\n      if (resource instanceof WebGLBuffer) {\r\n        ctx.deleteBuffer(resource);\r\n      } else if (resource instanceof WebGLFramebuffer) {\r\n        ctx.deleteFramebuffer(resource);\r\n      } else if (resource instanceof WebGLProgram) {\r\n        ctx.deleteProgram(resource);\r\n      } else if (resource instanceof WebGLRenderbuffer) {\r\n        ctx.deleteRenderbuffer(resource);\r\n      } else if (resource instanceof WebGLShader) {\r\n        ctx.deleteShader(resource);\r\n      } else if (resource instanceof WebGLTexture) {\r\n        ctx.deleteTexture(resource);\r\n      }\r\n    }\r\n  }\r\n\r\n  wrapper_.loseContext = function() {\r\n    if (!contextLost_) {\r\n      contextLost_ = true;\r\n      ++contextId_;\r\n      while (ctx.getError());\r\n      clearErrors();\r\n      glErrorShadow_[ctx.CONTEXT_LOST_WEBGL] = true;\r\n      setTimeout(function() {\r\n          if (onLost_) {\r\n            onLost_(makeWebGLContextEvent(\"context lost\"));\r\n          }\r\n        }, 0);\r\n    }\r\n  };\r\n\r\n  wrapper_.restoreContext = function() {\r\n    if (contextLost_) {\r\n      if (onRestored_) {\r\n        setTimeout(function() {\r\n            freeResources();\r\n            resetToInitialState(ctx);\r\n            contextLost_ = false;\r\n            if (onRestored_) {\r\n              var callback = onRestored_;\r\n              onRestored_ = nextOnRestored_;\r\n              nextOnRestored_ = undefined;\r\n              callback(makeWebGLContextEvent(\"context restored\"));\r\n            }\r\n          }, 0);\r\n      } else {\r\n        throw \"You can not restore the context without a listener\"\r\n      }\r\n    }\r\n  };\r\n\r\n  // Wrap a few functions specially.\r\n  wrapper_.getError = function() {\r\n    if (!contextLost_) {\r\n      var err;\r\n      while (err = ctx.getError()) {\r\n        glErrorShadow_[err] = true;\r\n      }\r\n    }\r\n    for (var err in glErrorShadow_) {\r\n      if (glErrorShadow_[err]) {\r\n        delete glErrorShadow_[err];\r\n        return err;\r\n      }\r\n    }\r\n    return ctx.NO_ERROR;\r\n  };\r\n\r\n  var creationFunctions = [\r\n    \"createBuffer\",\r\n    \"createFramebuffer\",\r\n    \"createProgram\",\r\n    \"createRenderbuffer\",\r\n    \"createShader\",\r\n    \"createTexture\"\r\n  ];\r\n  for (var ii = 0; ii < creationFunctions.length; ++ii) {\r\n    var functionName = creationFunctions[ii];\r\n    wrapper_[functionName] = function(f) {\r\n      return function() {\r\n        if (contextLost_) {\r\n          return null;\r\n        }\r\n        var obj = f.apply(ctx, arguments);\r\n        obj.__webglDebugContextLostId__ = contextId_;\r\n        resourceDb_.push(obj);\r\n        return obj;\r\n      };\r\n    }(ctx[functionName]);\r\n  }\r\n\r\n  var functionsThatShouldReturnNull = [\r\n    \"getActiveAttrib\",\r\n    \"getActiveUniform\",\r\n    \"getBufferParameter\",\r\n    \"getContextAttributes\",\r\n    \"getAttachedShaders\",\r\n    \"getFramebufferAttachmentParameter\",\r\n    \"getParameter\",\r\n    \"getProgramParameter\",\r\n    \"getProgramInfoLog\",\r\n    \"getRenderbufferParameter\",\r\n    \"getShaderParameter\",\r\n    \"getShaderInfoLog\",\r\n    \"getShaderSource\",\r\n    \"getTexParameter\",\r\n    \"getUniform\",\r\n    \"getUniformLocation\",\r\n    \"getVertexAttrib\"\r\n  ];\r\n  for (var ii = 0; ii < functionsThatShouldReturnNull.length; ++ii) {\r\n    var functionName = functionsThatShouldReturnNull[ii];\r\n    wrapper_[functionName] = function(f) {\r\n      return function() {\r\n        if (contextLost_) {\r\n          return null;\r\n        }\r\n        return f.apply(ctx, arguments);\r\n      }\r\n    }(wrapper_[functionName]);\r\n  }\r\n\r\n  var isFunctions = [\r\n    \"isBuffer\",\r\n    \"isEnabled\",\r\n    \"isFramebuffer\",\r\n    \"isProgram\",\r\n    \"isRenderbuffer\",\r\n    \"isShader\",\r\n    \"isTexture\"\r\n  ];\r\n  for (var ii = 0; ii < isFunctions.length; ++ii) {\r\n    var functionName = isFunctions[ii];\r\n    wrapper_[functionName] = function(f) {\r\n      return function() {\r\n        if (contextLost_) {\r\n          return false;\r\n        }\r\n        return f.apply(ctx, arguments);\r\n      }\r\n    }(wrapper_[functionName]);\r\n  }\r\n\r\n  wrapper_.checkFramebufferStatus = function(f) {\r\n    return function() {\r\n      if (contextLost_) {\r\n        return ctx.FRAMEBUFFER_UNSUPPORTED;\r\n      }\r\n      return f.apply(ctx, arguments);\r\n    };\r\n  }(wrapper_.checkFramebufferStatus);\r\n\r\n  wrapper_.getAttribLocation = function(f) {\r\n    return function() {\r\n      if (contextLost_) {\r\n        return -1;\r\n      }\r\n      return f.apply(ctx, arguments);\r\n    };\r\n  }(wrapper_.getAttribLocation);\r\n\r\n  wrapper_.getVertexAttribOffset = function(f) {\r\n    return function() {\r\n      if (contextLost_) {\r\n        return 0;\r\n      }\r\n      return f.apply(ctx, arguments);\r\n    };\r\n  }(wrapper_.getVertexAttribOffset);\r\n\r\n  wrapper_.isContextLost = function() {\r\n    return contextLost_;\r\n  };\r\n\r\n  function wrapEvent(listener) {\r\n    if (typeof(listener) == \"function\") {\r\n      return listener;\r\n    } else {\r\n      return function(info) {\r\n        listener.handleEvent(info);\r\n      }\r\n    }\r\n  }\r\n\r\n  wrapper_.registerOnContextLostListener = function(listener) {\r\n    onLost_ = wrapEvent(listener);\r\n  };\r\n\r\n  wrapper_.registerOnContextRestoredListener = function(listener) {\r\n    if (contextLost_) {\r\n      nextOnRestored_ = wrapEvent(listener);\r\n    } else {\r\n      onRestored_ = wrapEvent(listener);\r\n    }\r\n  }\r\n\r\n  return wrapper_;\r\n}\r\n\r\nreturn {\r\n  /**\r\n   * Initializes this module. Safe to call more than once.\r\n   * @param {!WebGLRenderingContext} ctx A WebGL context. If\r\n   *    you have more than one context it doesn't matter which one\r\n   *    you pass in, it is only used to pull out constants.\r\n   */\r\n  'init': init,\r\n\r\n  /**\r\n   * Returns true or false if value matches any WebGL enum\r\n   * @param {*} value Value to check if it might be an enum.\r\n   * @return {boolean} True if value matches one of the WebGL defined enums\r\n   */\r\n  'mightBeEnum': mightBeEnum,\r\n\r\n  /**\r\n   * Gets an string version of an WebGL enum.\r\n   *\r\n   * Example:\r\n   *   WebGLDebugUtil.init(ctx);\r\n   *   var str = WebGLDebugUtil.glEnumToString(ctx.getError());\r\n   *\r\n   * @param {number} value Value to return an enum for\r\n   * @return {string} The string version of the enum.\r\n   */\r\n  'glEnumToString': glEnumToString,\r\n\r\n  /**\r\n   * Converts the argument of a WebGL function to a string.\r\n   * Attempts to convert enum arguments to strings.\r\n   *\r\n   * Example:\r\n   *   WebGLDebugUtil.init(ctx);\r\n   *   var str = WebGLDebugUtil.glFunctionArgToString('bindTexture', 0, gl.TEXTURE_2D);\r\n   *\r\n   * would return 'TEXTURE_2D'\r\n   *\r\n   * @param {string} functionName the name of the WebGL function.\r\n   * @param {number} argumentIndx the index of the argument.\r\n   * @param {*} value The value of the argument.\r\n   * @return {string} The value as a string.\r\n   */\r\n  'glFunctionArgToString': glFunctionArgToString,\r\n\r\n  /**\r\n   * Given a WebGL context returns a wrapped context that calls\r\n   * gl.getError after every command and calls a function if the\r\n   * result is not NO_ERROR.\r\n   *\r\n   * You can supply your own function if you want. For example, if you'd like\r\n   * an exception thrown on any GL error you could do this\r\n   *\r\n   *    function throwOnGLError(err, funcName, args) {\r\n   *      throw WebGLDebugUtils.glEnumToString(err) + \" was caused by call to\" +\r\n   *            funcName;\r\n   *    };\r\n   *\r\n   *    ctx = WebGLDebugUtils.makeDebugContext(\r\n   *        canvas.getContext(\"webgl\"), throwOnGLError);\r\n   *\r\n   * @param {!WebGLRenderingContext} ctx The webgl context to wrap.\r\n   * @param {!function(err, funcName, args): void} opt_onErrorFunc The function\r\n   *     to call when gl.getError returns an error. If not specified the default\r\n   *     function calls console.log with a message.\r\n   */\r\n  'makeDebugContext': makeDebugContext,\r\n\r\n  /**\r\n   * Given a WebGL context returns a wrapped context that adds 4\r\n   * functions.\r\n   *\r\n   * ctx.loseContext:\r\n   *   simulates a lost context event.\r\n   *\r\n   * ctx.restoreContext:\r\n   *   simulates the context being restored.\r\n   *\r\n   * ctx.registerOnContextLostListener(listener):\r\n   *   lets you register a listener for context lost. Use instead\r\n   *   of addEventListener('webglcontextlostevent', listener);\r\n   *\r\n   * ctx.registerOnContextRestoredListener(listener):\r\n   *   lets you register a listener for context restored. Use\r\n   *   instead of addEventListener('webglcontextrestored',\r\n   *   listener);\r\n   *\r\n   * @param {!WebGLRenderingContext} ctx The webgl context to wrap.\r\n   */\r\n  'makeLostContextSimulatingContext': makeLostContextSimulatingContext,\r\n\r\n  /**\r\n   * Resets a context to the initial state.\r\n   * @param {!WebGLRenderingContext} ctx The webgl context to\r\n   *     reset.\r\n   */\r\n  'resetToInitialState': resetToInitialState\r\n};\r\n\r\n}();\r\n\r\n","import { WebGLUtils } from './webgl-utils'\r\nimport { WebGLDebugUtils } from './webgl-debug'\r\n\r\n// cuon-utils.js (c) 2012 kanda and matsuda\r\n/**\r\n * Create a program object and make current\r\n * @param gl GL context\r\n * @param vshader a vertex shader program (string)\r\n * @param fshader a fragment shader program (string)\r\n * @return true, if the program object was created and successfully made current \r\n */\r\nexport function initShaders(gl, vshader, fshader) {\r\n  var program = createProgram(gl, vshader, fshader);\r\n  if (!program) {\r\n    console.log('Failed to create program');\r\n    return false;\r\n  }\r\n\r\n  gl.useProgram(program);\r\n  gl.program = program;\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Create the linked program object\r\n * @param gl GL context\r\n * @param vshader a vertex shader program (string)\r\n * @param fshader a fragment shader program (string)\r\n * @return created program object, or null if the creation has failed\r\n */\r\nexport function createProgram(gl, vshader, fshader) {\r\n  // Create shader object\r\n  var vertexShader = loadShader(gl, gl.VERTEX_SHADER, vshader);\r\n  var fragmentShader = loadShader(gl, gl.FRAGMENT_SHADER, fshader);\r\n  if (!vertexShader || !fragmentShader) {\r\n    return null;\r\n  }\r\n\r\n  // Create a program object\r\n  var program = gl.createProgram();\r\n  if (!program) {\r\n    return null;\r\n  }\r\n\r\n  // Attach the shader objects\r\n  gl.attachShader(program, vertexShader);\r\n  gl.attachShader(program, fragmentShader);\r\n\r\n  // Link the program object\r\n  gl.linkProgram(program);\r\n\r\n  // Check the result of linking\r\n  var linked = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n  if (!linked) {\r\n    var error = gl.getProgramInfoLog(program);\r\n    console.log('Failed to link program: ' + error);\r\n    gl.deleteProgram(program);\r\n    gl.deleteShader(fragmentShader);\r\n    gl.deleteShader(vertexShader);\r\n    return null;\r\n  }\r\n  return program;\r\n}\r\n\r\n/**\r\n * Create a shader object\r\n * @param gl GL context\r\n * @param type the type of the shader object to be created\r\n * @param source shader program (string)\r\n * @return created shader object, or null if the creation has failed.\r\n */\r\nexport function loadShader(gl, type, source) {\r\n  // Create shader object\r\n  var shader = gl.createShader(type);\r\n  if (shader == null) {\r\n    console.log('unable to create shader');\r\n    return null;\r\n  }\r\n\r\n  // Set the shader program\r\n  gl.shaderSource(shader, source);\r\n\r\n  // Compile the shader\r\n  gl.compileShader(shader);\r\n\r\n  // Check the result of compilation\r\n  var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n  if (!compiled) {\r\n    var error = gl.getShaderInfoLog(shader);\r\n    console.log('Failed to compile shader: ' + error);\r\n    gl.deleteShader(shader);\r\n    return null;\r\n  }\r\n\r\n  return shader;\r\n}\r\n\r\n/** \r\n * Initialize and get the rendering for WebGL\r\n * @param canvas <cavnas> element\r\n * @param opt_debug flag to initialize the context for debugging\r\n * @return the rendering context for WebGL\r\n */\r\nexport function getWebGLContext(canvas, opt_debug) {\r\n  // Get the rendering context for WebGL\r\n  var gl = WebGLUtils.setupWebGL(canvas);\r\n  if (!gl) return null;\r\n\r\n  // if opt_debug is explicitly false, create the context for debugging\r\n  if (arguments.length < 2 || opt_debug) {\r\n    gl = WebGLDebugUtils.makeDebugContext(gl);\r\n  }\r\n\r\n  return gl;\r\n}\r\n","export const glsl = x => x\r\n\r\nexport const loadImage = src => {\r\n  return new Promise((resolve, reject) => {\r\n    let image = new Image()\r\n    image.onload = () => resolve(image)\r\n    image.onerror = error => reject(error)\r\n    image.src = src\r\n  })\r\n}\r\n\r\nexport const loadImageList = (list = []) => {\r\n  return Promise.all(list.map(loadImage))\r\n}\r\n\r\nexport const getX = (rect, clientX) => {\r\n  return (clientX - rect.left - rect.width / 2) / (rect.width / 2)\r\n}\r\n\r\nexport const getY = (rect, clientY) => {\r\n  return (rect.height / 2 - (clientY - rect.top)) / (rect.height / 2)\r\n}\r\n\r\nexport const getPosition = (canvas, event) => {\r\n  let rect = canvas.getBoundingClientRect()\r\n  return [getX(rect, event.clientX), getY(rect, event.clientY)]\r\n}\r\n\r\nexport const createVertexList = (list = []) => {\r\n  return new Float32Array(list.flat(Infinity))\r\n}\r\n\r\n/**\r\n * [\r\n *    [1, 2, 3, 4],\r\n *    [5, 6, 7, 8],\r\n *    [9, 10, 11, 12],\r\n *    [13, 14, 15, 16]\r\n * ]\r\n */\r\nexport const createMatrix = sourceList => {\r\n  let data = [[], [], [], []]\r\n\r\n  for (let array of sourceList) {\r\n    data[0].push(array[0])\r\n    data[1].push(array[1])\r\n    data[2].push(array[2])\r\n    data[3].push(array[3])\r\n  }\r\n\r\n  return new Float32Array(data.flat())\r\n}\r\n\r\nexport const createRotateZMatrix = (angle = 0) => {\r\n  let radian = (angle * Math.PI) / 180\r\n  let sinB = Math.sin(radian)\r\n  let cosB = Math.cos(radian)\r\n\r\n  return createMatrix([\r\n    [cosB, -sinB, 0.0, 0.0],\r\n    [sinB, cosB, 0.0, 0.0],\r\n    [0.0, 0.0, 1.0, 0.0],\r\n    [0.0, 0.0, 0.0, 1.0]\r\n  ])\r\n}\r\n\r\nexport const createTranslateMatrix = (x = 0, y = 0, z = 0) => {\r\n  return createMatrix([\r\n    [1.0, 0.0, 0.0, x],\r\n    [0.0, 1.0, 0.0, y],\r\n    [0.0, 0.0, 1.0, z],\r\n    [0.0, 0.0, 0.0, 1.0]\r\n  ])\r\n}\r\n\r\nexport const createScaleMatrix = (scaleX = 1, scaleY = 1, scaleZ = 1) => {\r\n  return createMatrix([\r\n    [scaleX, 0.0, 0.0, 0],\r\n    [0, scaleY, 0, 0],\r\n    [0, 0, scaleZ, 0],\r\n    [0, 0, 0, 1]\r\n  ])\r\n}\r\n","export function normalizeColor(color) {\r\n  var match\r\n\r\n  if (typeof color === 'number') {\r\n    if (color >>> 0 === color && color >= 0 && color <= 0xffffffff) return color\r\n    return null\r\n  }\r\n\r\n  // Ordered based on occurrences on Facebook codebase\r\n  if ((match = matchers.hex6.exec(color)))\r\n    return parseInt(match[1] + 'ff', 16) >>> 0\r\n\r\n  if (colorNames.hasOwnProperty(color)) return colorNames[color]\r\n\r\n  if ((match = matchers.rgb.exec(color))) {\r\n    return (\r\n      ((parse255(match[1]) << 24) | // r\r\n      (parse255(match[2]) << 16) | // g\r\n      (parse255(match[3]) << 8) | // b\r\n        0x000000ff) >>> // a\r\n      0\r\n    )\r\n  }\r\n\r\n  if ((match = matchers.rgba.exec(color))) {\r\n    return (\r\n      ((parse255(match[1]) << 24) | // r\r\n      (parse255(match[2]) << 16) | // g\r\n      (parse255(match[3]) << 8) | // b\r\n        parse1(match[4])) >>> // a\r\n      0\r\n    )\r\n  }\r\n\r\n  if ((match = matchers.hex3.exec(color))) {\r\n    return (\r\n      parseInt(\r\n        match[1] +\r\n        match[1] + // r\r\n        match[2] +\r\n        match[2] + // g\r\n        match[3] +\r\n        match[3] + // b\r\n          'ff', // a\r\n        16\r\n      ) >>> 0\r\n    )\r\n  }\r\n\r\n  // https://drafts.csswg.org/css-color-4/#hex-notation\r\n  if ((match = matchers.hex8.exec(color))) {\r\n    return parseInt(match[1], 16) >>> 0\r\n  }\r\n\r\n  if ((match = matchers.hex4.exec(color))) {\r\n    return (\r\n      parseInt(\r\n        match[1] +\r\n        match[1] + // r\r\n        match[2] +\r\n        match[2] + // g\r\n        match[3] +\r\n        match[3] + // b\r\n          match[4] +\r\n          match[4], // a\r\n        16\r\n      ) >>> 0\r\n    )\r\n  }\r\n\r\n  if ((match = matchers.hsl.exec(color))) {\r\n    return (\r\n      (hslToRgb(\r\n        parse360(match[1]), // h\r\n        parsePercentage(match[2]), // s\r\n        parsePercentage(match[3]) // l\r\n      ) |\r\n        0x000000ff) >>> // a\r\n      0\r\n    )\r\n  }\r\n\r\n  if ((match = matchers.hsla.exec(color))) {\r\n    return (\r\n      (hslToRgb(\r\n        parse360(match[1]), // h\r\n        parsePercentage(match[2]), // s\r\n        parsePercentage(match[3]) // l\r\n      ) |\r\n        parse1(match[4])) >>> // a\r\n      0\r\n    )\r\n  }\r\n  return null\r\n}\r\n\r\nfunction hue2rgb(p, q, t) {\r\n  if (t < 0) t += 1\r\n  if (t > 1) t -= 1\r\n  if (t < 1 / 6) return p + (q - p) * 6 * t\r\n  if (t < 1 / 2) return q\r\n  if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6\r\n  return p\r\n}\r\n\r\nfunction hslToRgb(h, s, l) {\r\n  var q = l < 0.5 ? l * (1 + s) : l + s - l * s\r\n  var p = 2 * l - q\r\n  var r = hue2rgb(p, q, h + 1 / 3)\r\n  var g = hue2rgb(p, q, h)\r\n  var b = hue2rgb(p, q, h - 1 / 3)\r\n  return (\r\n    (Math.round(r * 255) << 24) |\r\n    (Math.round(g * 255) << 16) |\r\n    (Math.round(b * 255) << 8)\r\n  )\r\n}\r\n\r\n// var INTEGER = '[-+]?\\\\d+';\r\nvar NUMBER = '[-+]?\\\\d*\\\\.?\\\\d+'\r\nvar PERCENTAGE = NUMBER + '%'\r\n\r\nfunction toArray(arrayLike) {\r\n  return Array.prototype.slice.call(arrayLike, 0)\r\n}\r\n\r\nfunction call() {\r\n  return '\\\\(\\\\s*(' + toArray(arguments).join(')\\\\s*,\\\\s*(') + ')\\\\s*\\\\)'\r\n}\r\n\r\nvar matchers = {\r\n  rgb: new RegExp('rgb' + call(NUMBER, NUMBER, NUMBER)),\r\n  rgba: new RegExp('rgba' + call(NUMBER, NUMBER, NUMBER, NUMBER)),\r\n  hsl: new RegExp('hsl' + call(NUMBER, PERCENTAGE, PERCENTAGE)),\r\n  hsla: new RegExp('hsla' + call(NUMBER, PERCENTAGE, PERCENTAGE, NUMBER)),\r\n  hex3: /^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\r\n  hex4: /^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\r\n  hex6: /^#([0-9a-fA-F]{6})$/,\r\n  hex8: /^#([0-9a-fA-F]{8})$/,\r\n}\r\n\r\nfunction parse255(str) {\r\n  var int = parseInt(str, 10)\r\n  if (int < 0) return 0\r\n  if (int > 255) return 255\r\n  return int\r\n}\r\n\r\nfunction parse360(str) {\r\n  var int = parseFloat(str)\r\n  return ((int % 360 + 360) % 360) / 360\r\n}\r\n\r\nfunction parse1(str) {\r\n  var num = parseFloat(str)\r\n  if (num < 0) return 0\r\n  if (num > 1) return 255\r\n  return Math.round(num * 255)\r\n}\r\n\r\nfunction parsePercentage(str) {\r\n  // parseFloat conveniently ignores the final %\r\n  var int = parseFloat(str, 10)\r\n  if (int < 0) return 0\r\n  if (int > 100) return 1\r\n  return int / 100\r\n}\r\n\r\nexport const colorNames = {\r\n  transparent: 0x00000000,\r\n\r\n  // http://www.w3.org/TR/css3-color/#svg-color\r\n  aliceblue: 0xf0f8ffff,\r\n  antiquewhite: 0xfaebd7ff,\r\n  aqua: 0x00ffffff,\r\n  aquamarine: 0x7fffd4ff,\r\n  azure: 0xf0ffffff,\r\n  beige: 0xf5f5dcff,\r\n  bisque: 0xffe4c4ff,\r\n  black: 0x000000ff,\r\n  blanchedalmond: 0xffebcdff,\r\n  blue: 0x0000ffff,\r\n  blueviolet: 0x8a2be2ff,\r\n  brown: 0xa52a2aff,\r\n  burlywood: 0xdeb887ff,\r\n  burntsienna: 0xea7e5dff,\r\n  cadetblue: 0x5f9ea0ff,\r\n  chartreuse: 0x7fff00ff,\r\n  chocolate: 0xd2691eff,\r\n  coral: 0xff7f50ff,\r\n  cornflowerblue: 0x6495edff,\r\n  cornsilk: 0xfff8dcff,\r\n  crimson: 0xdc143cff,\r\n  cyan: 0x00ffffff,\r\n  darkblue: 0x00008bff,\r\n  darkcyan: 0x008b8bff,\r\n  darkgoldenrod: 0xb8860bff,\r\n  darkgray: 0xa9a9a9ff,\r\n  darkgreen: 0x006400ff,\r\n  darkgrey: 0xa9a9a9ff,\r\n  darkkhaki: 0xbdb76bff,\r\n  darkmagenta: 0x8b008bff,\r\n  darkolivegreen: 0x556b2fff,\r\n  darkorange: 0xff8c00ff,\r\n  darkorchid: 0x9932ccff,\r\n  darkred: 0x8b0000ff,\r\n  darksalmon: 0xe9967aff,\r\n  darkseagreen: 0x8fbc8fff,\r\n  darkslateblue: 0x483d8bff,\r\n  darkslategray: 0x2f4f4fff,\r\n  darkslategrey: 0x2f4f4fff,\r\n  darkturquoise: 0x00ced1ff,\r\n  darkviolet: 0x9400d3ff,\r\n  deeppink: 0xff1493ff,\r\n  deepskyblue: 0x00bfffff,\r\n  dimgray: 0x696969ff,\r\n  dimgrey: 0x696969ff,\r\n  dodgerblue: 0x1e90ffff,\r\n  firebrick: 0xb22222ff,\r\n  floralwhite: 0xfffaf0ff,\r\n  forestgreen: 0x228b22ff,\r\n  fuchsia: 0xff00ffff,\r\n  gainsboro: 0xdcdcdcff,\r\n  ghostwhite: 0xf8f8ffff,\r\n  gold: 0xffd700ff,\r\n  goldenrod: 0xdaa520ff,\r\n  gray: 0x808080ff,\r\n  green: 0x008000ff,\r\n  greenyellow: 0xadff2fff,\r\n  grey: 0x808080ff,\r\n  honeydew: 0xf0fff0ff,\r\n  hotpink: 0xff69b4ff,\r\n  indianred: 0xcd5c5cff,\r\n  indigo: 0x4b0082ff,\r\n  ivory: 0xfffff0ff,\r\n  khaki: 0xf0e68cff,\r\n  lavender: 0xe6e6faff,\r\n  lavenderblush: 0xfff0f5ff,\r\n  lawngreen: 0x7cfc00ff,\r\n  lemonchiffon: 0xfffacdff,\r\n  lightblue: 0xadd8e6ff,\r\n  lightcoral: 0xf08080ff,\r\n  lightcyan: 0xe0ffffff,\r\n  lightgoldenrodyellow: 0xfafad2ff,\r\n  lightgray: 0xd3d3d3ff,\r\n  lightgreen: 0x90ee90ff,\r\n  lightgrey: 0xd3d3d3ff,\r\n  lightpink: 0xffb6c1ff,\r\n  lightsalmon: 0xffa07aff,\r\n  lightseagreen: 0x20b2aaff,\r\n  lightskyblue: 0x87cefaff,\r\n  lightslategray: 0x778899ff,\r\n  lightslategrey: 0x778899ff,\r\n  lightsteelblue: 0xb0c4deff,\r\n  lightyellow: 0xffffe0ff,\r\n  lime: 0x00ff00ff,\r\n  limegreen: 0x32cd32ff,\r\n  linen: 0xfaf0e6ff,\r\n  magenta: 0xff00ffff,\r\n  maroon: 0x800000ff,\r\n  mediumaquamarine: 0x66cdaaff,\r\n  mediumblue: 0x0000cdff,\r\n  mediumorchid: 0xba55d3ff,\r\n  mediumpurple: 0x9370dbff,\r\n  mediumseagreen: 0x3cb371ff,\r\n  mediumslateblue: 0x7b68eeff,\r\n  mediumspringgreen: 0x00fa9aff,\r\n  mediumturquoise: 0x48d1ccff,\r\n  mediumvioletred: 0xc71585ff,\r\n  midnightblue: 0x191970ff,\r\n  mintcream: 0xf5fffaff,\r\n  mistyrose: 0xffe4e1ff,\r\n  moccasin: 0xffe4b5ff,\r\n  navajowhite: 0xffdeadff,\r\n  navy: 0x000080ff,\r\n  oldlace: 0xfdf5e6ff,\r\n  olive: 0x808000ff,\r\n  olivedrab: 0x6b8e23ff,\r\n  orange: 0xffa500ff,\r\n  orangered: 0xff4500ff,\r\n  orchid: 0xda70d6ff,\r\n  palegoldenrod: 0xeee8aaff,\r\n  palegreen: 0x98fb98ff,\r\n  paleturquoise: 0xafeeeeff,\r\n  palevioletred: 0xdb7093ff,\r\n  papayawhip: 0xffefd5ff,\r\n  peachpuff: 0xffdab9ff,\r\n  peru: 0xcd853fff,\r\n  pink: 0xffc0cbff,\r\n  plum: 0xdda0ddff,\r\n  powderblue: 0xb0e0e6ff,\r\n  purple: 0x800080ff,\r\n  rebeccapurple: 0x663399ff,\r\n  red: 0xff0000ff,\r\n  rosybrown: 0xbc8f8fff,\r\n  royalblue: 0x4169e1ff,\r\n  saddlebrown: 0x8b4513ff,\r\n  salmon: 0xfa8072ff,\r\n  sandybrown: 0xf4a460ff,\r\n  seagreen: 0x2e8b57ff,\r\n  seashell: 0xfff5eeff,\r\n  sienna: 0xa0522dff,\r\n  silver: 0xc0c0c0ff,\r\n  skyblue: 0x87ceebff,\r\n  slateblue: 0x6a5acdff,\r\n  slategray: 0x708090ff,\r\n  slategrey: 0x708090ff,\r\n  snow: 0xfffafaff,\r\n  springgreen: 0x00ff7fff,\r\n  steelblue: 0x4682b4ff,\r\n  tan: 0xd2b48cff,\r\n  teal: 0x008080ff,\r\n  thistle: 0xd8bfd8ff,\r\n  tomato: 0xff6347ff,\r\n  turquoise: 0x40e0d0ff,\r\n  violet: 0xee82eeff,\r\n  wheat: 0xf5deb3ff,\r\n  white: 0xffffffff,\r\n  whitesmoke: 0xf5f5f5ff,\r\n  yellow: 0xffff00ff,\r\n  yellowgreen: 0x9acd32ff,\r\n}","import { combineLatest, of, isObservable } from 'rxjs'\r\nimport { map, tap } from 'rxjs/operators'\r\n\r\nexport const once = f => source => {\r\n  let ignore = false\r\n  return source.pipe(\r\n    tap(value => {\r\n      if (ignore) return\r\n      ignore = true\r\n      f(value)\r\n    })\r\n  )\r\n}\r\n\r\nexport const isSource = obj => !!obj && isObservable(obj)\r\nexport const makeSource = obj => (isSource(obj) ? obj : of(obj))\r\n\r\nexport const mapValue = (obj, f) =>\r\n  Object.keys(obj).reduce((result, key) => {\r\n    result[key] = f(obj[key], key)\r\n    return result\r\n  }, {})\r\n\r\nexport const isPlainObject = obj => {\r\n  if (typeof obj !== 'object' || obj === null) return false\r\n\r\n  let proto = obj\r\n  while (Object.getPrototypeOf(proto) !== null) {\r\n    proto = Object.getPrototypeOf(proto)\r\n  }\r\n\r\n  return Object.getPrototypeOf(obj) === proto\r\n}\r\n\r\nexport const isReactComponent = obj => !!(obj && obj.prototype && obj.prototype.isReactComponent)\r\n\r\nexport const getDisplayName = WrappedComponent => {\r\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component'\r\n}\r\n\r\nconst combineArray = array => {\r\n  if (!array.length) return array\r\n  let sourceList = Array(array.length)\r\n  let hasSource = false\r\n  for (let i = 0; i < array.length; i++) {\r\n    let item = array[i]\r\n    let source = combineIfNeeded(item)\r\n    if (isSource(source)) {\r\n      hasSource = true\r\n      sourceList[i] = source\r\n    } else {\r\n      sourceList[i] = of(item)\r\n    }\r\n  }\r\n  return hasSource ? combineLatest(sourceList) : array\r\n}\r\n\r\nconst combineObject = obj => {\r\n  let keys = Object.keys(obj)\r\n  if (!keys.length) return obj\r\n  let valueArray = keys.map(key => obj[key])\r\n  let source = combineArray(valueArray)\r\n  if (!isSource(source)) return obj\r\n  let construct = (result, value, index) => {\r\n    result[keys[index]] = value\r\n    return result\r\n  }\r\n  let toShape = valueList => {\r\n    return valueList.reduce(construct, {})\r\n  }\r\n  return source.pipe(map(toShape))\r\n}\r\n\r\nconst combineIfNeeded = shape => {\r\n  if (isSource(shape)) {\r\n    return shape\r\n  } else if (Array.isArray(shape)) {\r\n    return combineArray(shape)\r\n  } else if (isPlainObject(shape)) {\r\n    return combineObject(shape)\r\n  }\r\n  return shape\r\n}\r\n\r\nexport const combine = shape => {\r\n  return makeSource(combineIfNeeded(shape))\r\n}\r\n\r\nexport const unsubscribe = subscription => subscription.unsubscribe()\r\n\r\nexport const shallowEqual = (objA, objB) => {\r\n  if (objA === objB) {\r\n    return true\r\n  }\r\n\r\n  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\r\n    return false\r\n  }\r\n\r\n  var keysA = Object.keys(objA)\r\n  var keysB = Object.keys(objB)\r\n\r\n  if (keysA.length !== keysB.length) {\r\n    return false\r\n  }\r\n\r\n  // Test for A's keys different from B.\r\n  for (var i = 0; i < keysA.length; i++) {\r\n    if (!objB.hasOwnProperty(keysA[i]) || objA[keysA[i]] !== objB[keysA[i]]) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  return true\r\n}\r\n","// Taken from https://github.com/drcmda/react-spring/blob/master/src/animated/targets/Interpolation.js\r\nimport { normalizeColor, colorNames } from './normalize-css-color'\r\nimport { mapValue, isPlainObject } from '../shared'\r\n\r\nfunction colorToRgba(input) {\r\n  var int32Color = normalizeColor(input)\r\n  if (int32Color === null) return input\r\n  int32Color = int32Color || 0 // $FlowIssue\r\n  const r = (int32Color & 0xff000000) >>> 24\r\n  const g = (int32Color & 0x00ff0000) >>> 16\r\n  const b = (int32Color & 0x0000ff00) >>> 8\r\n  const a = (int32Color & 0x000000ff) / 255\r\n  return `rgba(${r}, ${g}, ${b}, ${a})`\r\n}\r\n\r\n// Problem: https://github.com/animatedjs/animated/pull/102\r\n// Solution: https://stackoverflow.com/questions/638565/parsing-scientific-notation-sensibly/658662\r\nconst stringShapeRegex = /[+\\-]?(?:0|[1-9]\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g\r\n\r\n// Covers rgb, rgba, hsl, hsla\r\n// Taken from https://gist.github.com/olmokramer/82ccce673f86db7cda5e\r\nconst colorRegex = /(#[\\d\\w]+|\\w+\\((?:\\d+%?(?:,\\s)*){3}(?:\\d*\\.?\\d+)?\\))/\r\n// Covers color names (transparent, blue, etc.)\r\nconst colorNamesRegex = new RegExp(`(${Object.keys(colorNames).join('|')})`, 'g')\r\n\r\nconst convertColor = str => (str + '').replace(colorRegex, colorToRgba).replace(colorNamesRegex, colorToRgba)\r\n\r\n// rgba requires that the r,g,b are integers.... so we want to round them, but we *dont* want to\r\n// round the opacity (4th column).\r\nconst rgbaRegex = /rgba\\(([0-9\\.-]+), ([0-9\\.-]+), ([0-9\\.-]+), ([0-9\\.-]+)\\)/gi\r\nconst rgbaReplacement = (_, p1, p2, p3, p4) => `rgba(${Math.round(p1)}, ${Math.round(p2)}, ${Math.round(p3)}, ${p4})`\r\n\r\nconst empty = []\r\nconst constant = value => () => value\r\n\r\nconst handleValue = (fromValue, toValue) => {\r\n  if (fromValue != null && toValue == null) {\r\n    return constant(fromValue)\r\n  }\r\n\r\n  if (fromValue == null && toValue != null) {\r\n    return constant(toValue)\r\n  }\r\n\r\n  if (fromValue == null && toValue == null) {\r\n    return constant(null)\r\n  }\r\n\r\n  let fromType = typeof fromValue\r\n  let toType = typeof toValue\r\n  if (fromType === 'number' && toType === 'number') {\r\n    return handleNumberValue(fromValue, toValue)\r\n  } else if (fromType === 'string' && toType === 'string') {\r\n    return handleStringValue(fromValue, toValue)\r\n  } else if (isPlainObject(fromValue) && isPlainObject(toValue)) {\r\n    return handleObjectValue(fromValue, toValue)\r\n  } else if (Array.isArray(fromValue) && Array.isArray(toValue)) {\r\n    return handleArrayValue(fromValue, toValue)\r\n  }\r\n\r\n  throw new Error(`unsupported type or not the same type. fromValue: ${fromValue}, toValue: ${toValue}`)\r\n}\r\n\r\nconst handleNumberValue = (fromValue, toValue) => {\r\n  let diffValue = toValue - fromValue\r\n  return ratio => fromValue + diffValue * ratio\r\n}\r\n\r\nconst handleStringValue = (fromValue, toValue) => {\r\n  fromValue = convertColor(fromValue)\r\n  toValue = convertColor(toValue)\r\n  let fromArray = fromValue.match(stringShapeRegex) || empty\r\n  let toArray = toValue.match(stringShapeRegex) || empty\r\n  let diffArray = fromArray.map((fromValue, index) => {\r\n    fromValue = fromArray[index] = Number(fromValue)\r\n    return Number(toArray[index]) - fromValue\r\n  })\r\n  return ratio => {\r\n    let index = 0\r\n    let replacement = () => fromArray[index] + diffArray[index++] * ratio\r\n    return fromValue.replace(stringShapeRegex, replacement).replace(rgbaRegex, rgbaReplacement)\r\n  }\r\n}\r\n\r\nconst handleArrayValue = (fromArray, toArray) => {\r\n  let handlerList = toArray.map((toValue, index) => handleValue(fromArray[index], toValue))\r\n  // add items which are not in toArray\r\n  handlerList = handlerList.concat(fromArray.slice(handlerList.length).map(constant))\r\n  return ratio => handlerList.map(handler => handler(ratio))\r\n}\r\n\r\nconst handleObjectValue = (fromObject, toObject) => {\r\n  let handlerObject = mapValue(toObject, (toValue, key) => handleValue(fromObject[key], toValue))\r\n  // add keys which are not in toObject\r\n  for (let key in fromObject) {\r\n    if (!handlerObject.hasOwnProperty(key)) {\r\n      handlerObject[key] = constant(fromObject[key])\r\n    }\r\n  }\r\n  return ratio => mapValue(handlerObject, handler => handler(ratio))\r\n}\r\n\r\nexport default handleValue\r\n","import { Spring as WobbleSpring } from 'wobble'\r\nimport { Observable, ReplaySubject, empty } from 'rxjs'\r\nimport { switchMap, tap, startWith } from 'rxjs/operators'\r\nimport handleValue from './handleValue'\r\nimport { shallowEqual } from '../shared'\r\n\r\nconst spring = (fromValue, toValue, options) => {\r\n\treturn Observable.create(observer => {\r\n\t\tif (fromValue != null && toValue == null) {\r\n\t\t\tobserver.next(fromValue)\r\n\t\t\tobserver.complete()\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (fromValue == null && toValue != null) {\r\n\t\t\tobserver.next(toValue)\r\n\t\t\tobserver.complete()\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (fromValue == null && toValue == null) {\r\n\t\t\tobserver.next(null)\r\n\t\t\tobserver.complete()\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (shallowEqual(fromValue, toValue)) {\r\n\t\t\tobserver.next(toValue)\r\n\t\t\tobserver.complete()\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet updater = handleValue(fromValue, toValue)\r\n\t\tlet instance = new WobbleSpring({\r\n\t\t\t...options,\r\n\t\t\tfromValue: 0,\r\n\t\t\ttoValue: 1\r\n\t\t})\r\n\t\tinstance.start()\r\n\t\tinstance.onUpdate(data => {\r\n\t\t\tobserver.next(updater(data.currentValue))\r\n\t\t})\r\n\t\tinstance.onStop(() => {\r\n\t\t\tobserver.complete()\r\n\t\t})\r\n\t\treturn () => instance.stop()\r\n\t})\r\n}\r\n\r\nexport function Spring(fromValue, toValue, options) {\r\n\treturn spring(fromValue, toValue, options)\r\n}\r\n\r\nconst springSubject = (fromValue, toValue, options) => {\r\n\tlet lastValue = fromValue\r\n\tlet subject = new ReplaySubject(1)\r\n\tlet updateLastValue = value => (lastValue = value)\r\n\tlet handleSwitch = ({ value, observer, nextOptions }) => {\r\n\t\tif (lastValue == null && value == null) return empty()\r\n\t\treturn spring(lastValue, value, nextOptions || options).pipe(tap(updateLastValue), tap(observer))\r\n\t}\r\n\tlet startValue = { value: toValue }\r\n\tlet spring$ = subject.pipe(startWith(startValue), switchMap(handleSwitch))\r\n\tspring$.next = (value, nextOptions) => {\r\n\t\tlet innerSubject = new ReplaySubject(1)\r\n\t\tsubject.next({ value, nextOptions, observer: innerSubject })\r\n\t\treturn innerSubject\r\n\t}\r\n\tspring$.complete = () => subject.complete()\r\n\treturn spring$\r\n}\r\n\r\nexport function SpringSubject(fromValue, toValue, options) {\r\n\treturn springSubject(fromValue, toValue, options)\r\n}\r\n","export * from './spring'\r\n"],"sourceRoot":""}