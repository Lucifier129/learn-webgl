(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{28:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r})},29:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",function(){return a})},57:function(t,e,n){var r=n(24).vec3,a=function(t){return t instanceof Float32Array},i=function(t){return r.fromValues(t,t,t)};t.exports={_add_:function(t,e){return a(t)||a(e)?(a(t)||(t=i(t)),a(e)||(e=i(e)),r.add(r.create(),t,e)):t+e},_sub_:function(t,e){return a(t)||a(e)?(a(t)||(t=i(t)),a(e)||(e=i(e)),r.sub(r.create(),t,e)):t-e},_mul_:function(t,e){return a(t)||a(e)?(a(t)||(t=i(t)),a(e)||(e=i(e)),r.mul(r.create(),t,e)):t*e},_div_:function(t,e){return a(t)||a(e)?(a(t)||(t=i(t)),a(e)||(e=i(e)),r.div(r.create(),t,e)):t/e},_negate_:function(t){return a(t)?r.negate(r.create(),t):-t}}},75:function(t,e,n){"use strict";n.r(e);var r=n(17),a=n.n(r),i=n(19),o=n(1),u=n(0),c=n.n(u),s=n(28),f=n(29),h=n(24).vec3,d=n(57),l=d._add_,v=d._sub_,m=d._mul_,b=d._div_,w=d._negate_,p=function(t,e,n){return h.fromValues(t,e,n)},x=function(t,e){return h.dot(t,e)},g=function(t,e){return h.cross(h.create(),t,e)},M=function(t){return h.normalize(h.create(),t)},k=function(){function t(e,n){Object(s.a)(this,t),this.a=e,this.b=n}return Object(f.a)(t,[{key:"origin",value:function(){return this.a}},{key:"direction",value:function(){return this.b}},{key:"pointAt",value:function(t){var e=this.a,n=this.b;return l(e,m(t,n))}}]),t}(),y=function(){return{t:0,p:h.create(),normal:h.create()}},j=function(){function t(e,n,r){Object(s.a)(this,t),this.center=e,this.radius=n,this.material=r}return Object(f.a)(t,[{key:"hit",value:function(t,e,n,r){var a=v(t.origin(),this.center),i=x(t.direction(),t.direction()),o=x(a,t.direction()),u=v(x(a,a),m(this.radius,this.radius)),c=v(m(o,o),m(i,u));if(c<0)return!1;var s=b(v(w(o),Math.sqrt(c)),i),f=s<n&&s>e;return f||(f=(s=b(l(w(o),Math.sqrt(c)),i))<n&&s>e),!!f&&(r.t=s,r.p=t.pointAt(s),r.normal=b(v(r.p,this.center),this.radius),r.material=this.material,!0)}}]),t}(),O=function(){function t(e){Object(s.a)(this,t),this.list=e}return Object(f.a)(t,[{key:"hit",value:function(t,e,n,r){var a=y(),i=!1,o=n,u=!0,c=!1,s=void 0;try{for(var f,h=this.list[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){f.value.hit(t,e,o,a)&&(i=!0,o=a.t,Object.assign(r,a))}}catch(d){c=!0,s=d}finally{try{u||null==h.return||h.return()}finally{if(c)throw s}}return i}},{key:"push",value:function(){var t;(t=this.list).push.apply(t,arguments)}}]),t}(),_=function(){function t(e,n,r,a,i,o,u){Object(s.a)(this,t);var c=b(m(a,Math.PI),180),f=Math.tan(b(c,2)),h=m(f,i),d=e,w=M(v(e,n)),p=M(g(r,w)),x=g(w,p),k=v(d,m(u,l(l(m(p,h),m(x,f)),w))),y=m(m(m(u,2),p),h),j=m(m(m(u,2),x),f);this.u=p,this.v=x,this.origin=d,this.lowerLeftCorner=k,this.horizontal=y,this.vertical=j,this.lensRadius=b(o,2)}return Object(f.a)(t,[{key:"getRay",value:function(t,e){var n=this.origin,r=this.lowerLeftCorner,a=this.horizontal,i=this.vertical,o=m(this.lensRadius,function(){var t;do{var e=p(Math.random(),Math.random(),0);t=v(m(2,e),p(1,1,0))}while(x(t,t)>=1);return t}()),u=l(m(this.u,o[0]),m(this.v,o[1])),c=v(l(l(r,m(t,a)),m(e,i)),n);return new k(l(n,u),v(c,u))}}]),t}(),A=function(){var t;do{var e=p(Math.random(),Math.random(),Math.random());t=v(m(2,e),p(1,1,1))}while(h.squaredLength(t)>=1);return t},D=function(){function t(e){Object(s.a)(this,t),this.albedo=e}return Object(f.a)(t,[{key:"scatter",value:function(t,e,n){var r=l(l(e.p,e.normal),A()),a=v(r,e.p);return n.scattered=new k(e.p,a),n.attenuation=this.albedo,!0}}]),t}(),F=function(t,e){return v(t,m(m(2,x(t,e)),e))},z=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(s.a)(this,t),this.albedo=e,this.fuzz=Math.min(n,1)}return Object(f.a)(t,[{key:"scatter",value:function(t,e,n){var r=F(h.normalize(h.create(),t.direction()),e.normal);return n.scattered=new k(e.p,l(r,m(this.fuzz,A()))),n.attenuation=this.albedo,x(n.scattered.direction(),e.normal)>0}}]),t}(),I=function(){function t(e){Object(s.a)(this,t),this.refractIndex=e}return Object(f.a)(t,[{key:"scatter",value:function(t,e,n){var r=h.create(),a=F(t.direction(),e.normal),i=0,o=0;n.attenuation=p(1,1,1);var u=x(t.direction(),e.normal);u>0?(r=w(e.normal),i=this.refractIndex,o=b(m(this.refractIndex,u),h.length(t.direction()))):(r=e.normal,i=b(1,this.refractIndex),o=b(w(u),h.length(t.direction())));var c=0;return c=function(t,e,n,r){var a=h.normalize(h.create(),t),i=x(a,e),o=v(1,m(m(n,n),v(1,m(i,i))));return o>0&&(r.refracted=v(m(n,v(a,m(e,i))),m(e,Math.sqrt(o))),!0)}(t.direction(),r,i,n)?function(t,e){var n=b(v(1,e),l(1,e));return n=m(n,n),l(n,m(v(1,n),Math.pow(v(1,t),5)))}(o,this.refractIndex):1,Math.random()<c?n.scattered=new k(e.p,a):n.scattered=new k(e.p,n.refracted),!0}}]),t}(),q=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=y();if(n.hit(e,.001,1/0,a)){var i={scattered:null,attenuation:0};return r>=50||!a.material.scatter(e,a,i)?p(0,0,0):m(i.attenuation,t(i.scattered,n,l(r,1)))}var o,u,c,s=h.normalize(h.create(),e.direction());return o=m(.5,l(s[1],1)),u=p(1,1,1),c=p(.5,.7,1),l(m(v(1,o),u),m(o,c))},R=function(t){var e=t.width,n=void 0===e?800:e,r=t.height,i=void 0===r?400:r,u=t.amount,c=void 0===u?2:u,s=t.lookFrom,f=void 0===s?p(13,2,3):s,d=t.lookAt,x=void 0===d?p(0,0,0):d,g=t.vup,M=void 0===g?p(0,1,0):g,k=t.vfov,y=void 0===k?20:k,A=t.aspect,F=void 0===A?b(n,i):A,R=t.focusDist,E=void 0===R?10:R,C=t.aperture,P=n,S=i,L=new _(f,x,M,y,F,void 0===C?.1:C,E),B=function(t){var e=[],n=Math.floor(b(Math.sqrt(t),2)),r=w(n),a=+n;e[0]=new j(p(0,-1e3,0),1e3,new D(p(.5,.5,.5)));for(var i=1,o=p(4,.2,0),u=r;u<a;u++)for(var c=r;c<a;c++){var s=Math.random(),f=p(l(u,m(.9,Math.random())),.2,l(c,m(.9,Math.random())));if(h.length(v(f,o))>.9)if(s<.8){var d=new D(p(m(Math.random(),Math.random()),m(Math.random(),Math.random()),m(Math.random(),Math.random())));e[i++]=new j(f,.2,d)}else if(s<.95){var x=new z(p(m(.5,l(1,Math.random())),m(.5,l(1,Math.random())),m(.5,l(1,Math.random()))),m(.5,Math.random()));e[i++]=new j(f,.2,x)}else e[i++]=new j(f,.2,new I(1.5))}return e[i++]=new j(p(0,1,0),1,new I(1.5)),e[i++]=new j(p(-4,1,0),1,new D(p(.4,.2,.1))),e[i++]=new j(p(4,1,0),1,new z(p(.7,.6,.5),0)),new O(e)}(c),J=function(t,e){var n=b(l(t,Math.random()),P),r=b(l(e,Math.random()),S),a=L.getRay(n,r);return q(a,B)};return{render:a.a.mark(function t(){var e,n,r,i,u,c,s,f;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=v(S,1);case 1:if(!(e>=0)){t.next=20;break}n=0;case 3:if(!(n<P)){t.next=17;break}return r=J(n,e),i=Object(o.a)(r,3),u=i[0],c=i[1],s=i[2],f=1,t.next=8,u;case 8:return t.next=10,c;case 10:return t.next=12,s;case 12:return t.next=14,f;case 14:n++,t.next=3;break;case 17:e--,t.next=1;break;case 20:case"end":return t.stop()}},t)}),renderByPosition:J}};n.d(e,"default",function(){return B});var E=function(){},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;return new Promise(function(e){requestAnimationFrame(function(){t(),e()})})},P=function(t,e){for(var n=0,r=0;r<t.length;r++)n+=Math.pow(t[r]-e[r],2);return n/t.length},S=function(t,e){for(var n=[],r=0;r<t.length;r+=4){var a=Math.floor(r/4),i=[t[r+0],t[r+1],t[r+2],t[r+3]],o=[e[r+0],e[r+1],e[r+2],e[r+3]];n[a]={index:a,value:P(i,o)}}return n.sort(function(t,e){return e.value-t.value})},L=function(t){return Math.floor(255.99*Math.sqrt(t))};function B(){var t=Object(u.useState)(0),e=Object(o.a)(t,2),n=(e[0],e[1]),r=Object(u.useState)(0),s=Object(o.a)(r,2),f=s[0],h=s[1],d=Object(u.useRef)(),l=Object(u.useRef)();return Object(u.useEffect)(function(){var t=d.current,e=l.current,r=t.getContext("2d"),u=R({width:800,height:400,amount:50}),c=r.createImageData(800,400),s=new Float32Array(128e4),f=new Float32Array(128e4),v=new Float32Array(128e4),m=new Float32Array(128e4),b=1,w=0,p=null,x=!1,g=function(){r.clearRect(0,0,800,400),r.putImageData(c,0,0)},M=function(){for(var t=m,n=e.getContext("2d"),r=n.createImageData(800,400),a=0;a<t.length;a++)r.data[a]=(a+1)%4===0?255:t[a];n.clearRect(0,0,800,400),n.putImageData(r,0,0)},k=function(t,e){var n=u.renderByPosition(t,e),r=Object(o.a)(n,4),a=r[0],i=r[1],h=r[2],d=r[3],l=void 0===d?1:d,b=4*(800*(400-e)+t);s[b+0]+=a,s[b+1]+=i,s[b+2]+=h,s[b+3]+=l,m[b+0]+=1,m[b+1]+=1,m[b+2]+=1,m[b+3]+=1,f[b+0]=c.data[b+0],f[b+1]=c.data[b+1],f[b+2]=c.data[b+2],f[b+3]=c.data[b+3],c.data[b+0]=L(s[b+0]/m[b+0]),c.data[b+1]=L(s[b+1]/m[b+1]),c.data[b+2]=L(s[b+2]/m[b+2]),c.data[b+3]=L(s[b+3]/m[b+3]),v[b+0]=c.data[b+0],v[b+1]=c.data[b+1],v[b+2]=c.data[b+2],v[b+3]=c.data[b+3]},y=function(){var t=Object(i.a)(a.a.mark(function t(){var e,r,i,o,d,l,k,O,_;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=Date.now(),r=0,i=0,o=!0,d=!1,l=void 0,t.prev=6,k=u.render()[Symbol.iterator]();case 8:if(o=(O=k.next()).done){t.next=26;break}if(_=O.value,m[r]+=1,s[r]+=_,f[r]=c.data[r],c.data[r]=L(s[r]/m[r]),v[r]=c.data[r],r+=1,(i=Date.now()-e)%100!==0){t.next=21;break}return h(w+i),t.next=21,C(function(){g(),M()});case 21:if(!x){t.next=23;break}return t.abrupt("return");case 23:o=!0,t.next=8;break;case 26:t.next=32;break;case 28:t.prev=28,t.t0=t.catch(6),d=!0,l=t.t0;case 32:t.prev=32,t.prev=33,o||null==k.return||k.return();case 35:if(t.prev=35,!d){t.next=38;break}throw l;case 38:return t.finish(35);case 39:return t.finish(32);case 40:if(!x){t.next=42;break}return t.abrupt("return");case 42:g(),n(b),h(w+=Date.now()-e),(b+=1)>2?j():p=requestAnimationFrame(y);case 47:case"end":return t.stop()}},t,null,[[6,28,32,40],[33,,35,39]])}));return function(){return t.apply(this,arguments)}}(),j=function(){var t=Object(i.a)(a.a.mark(function t(){var e,r,i,o,u,c,s,d,l=arguments;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=l.length>0&&void 0!==l[0]?l[0]:0,r=S(f,v),i=Date.now(),o=0,u=0;case 5:if(!(u<2e4)){t.next=20;break}if(c=r[u],s=c.index%800,d=400-Math.floor(c.index/800),k(s,d),(o=Date.now()-i)%100!==0){t.next=15;break}return h(w+o),t.next=15,C(function(){g(),M()});case 15:if(!x){t.next=17;break}return t.abrupt("return");case 17:u++,t.next=5;break;case 20:if(!x){t.next=22;break}return t.abrupt("return");case 22:g(),n(b),h(w+=Date.now()-i),p=requestAnimationFrame(function(){e<5?j(e+1):y()});case 26:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return y(),function(){x=!0,clearTimeout(p)}},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("canvas",{width:800,height:400,ref:d}),c.a.createElement("canvas",{width:800,height:400,ref:l}),c.a.createElement("h3",null,"\u5149\u7ebf\u8ffd\u8e2a\u65f6\u95f4\uff1a",(f/1e3).toFixed(2),"\u79d2"))}}}]);
//# sourceMappingURL=8.9206595d.chunk.js.map