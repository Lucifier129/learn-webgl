(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{28:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r})},29:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",function(){return a})},57:function(e,t,n){var r=n(24).vec3,a=function(e){return e instanceof Float32Array},i=function(e){return r.fromValues(e,e,e)};e.exports={_add_:function(e,t){return a(e)||a(t)?(a(e)||(e=i(e)),a(t)||(t=i(t)),r.add(r.create(),e,t)):e+t},_sub_:function(e,t){return a(e)||a(t)?(a(e)||(e=i(e)),a(t)||(t=i(t)),r.sub(r.create(),e,t)):e-t},_mul_:function(e,t){return a(e)||a(t)?(a(e)||(e=i(e)),a(t)||(t=i(t)),r.mul(r.create(),e,t)):e*t},_div_:function(e,t){return a(e)||a(t)?(a(e)||(e=i(e)),a(t)||(t=i(t)),r.div(r.create(),e,t)):e/t},_negate_:function(e){return a(e)?r.negate(r.create(),e):-e}}},75:function(e,t,n){"use strict";n.r(t);var r=n(19),a=n(1),i=n(17),o=n.n(i),u=n(0),c=n.n(u),s=n(28),f=n(29),h=n(24).vec3,d=n(57),l=d._add_,v=d._sub_,b=d._mul_,m=d._div_,p=d._negate_,w=function(e,t,n){return h.fromValues(e,t,n)},x=function(e,t){return h.dot(e,t)},k=function(e,t){return h.cross(h.create(),e,t)},g=function(e){return h.normalize(h.create(),e)},M=function(){function e(t,n){Object(s.a)(this,e),this.a=t,this.b=n}return Object(f.a)(e,[{key:"origin",value:function(){return this.a}},{key:"direction",value:function(){return this.b}},{key:"pointAt",value:function(e){var t=this.a,n=this.b;return l(t,b(e,n))}}]),e}(),y=function(){return{t:0,p:h.create(),normal:h.create()}},j=function(){function e(t,n,r){Object(s.a)(this,e),this.center=t,this.radius=n,this.material=r}return Object(f.a)(e,[{key:"hit",value:function(e,t,n,r){var a=v(e.origin(),this.center),i=x(e.direction(),e.direction()),o=x(a,e.direction()),u=v(x(a,a),b(this.radius,this.radius)),c=v(b(o,o),b(i,u));if(c<0)return!1;var s=m(v(p(o),Math.sqrt(c)),i),f=s<n&&s>t;return f||(f=(s=m(l(p(o),Math.sqrt(c)),i))<n&&s>t),!!f&&(r.t=s,r.p=e.pointAt(s),r.normal=m(v(r.p,this.center),this.radius),r.material=this.material,!0)}}]),e}(),O=function(){function e(t){Object(s.a)(this,e),this.list=t}return Object(f.a)(e,[{key:"hit",value:function(e,t,n,r){var a=y(),i=!1,o=n,u=!0,c=!1,s=void 0;try{for(var f,h=this.list[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){f.value.hit(e,t,o,a)&&(i=!0,o=a.t,Object.assign(r,a))}}catch(d){c=!0,s=d}finally{try{u||null==h.return||h.return()}finally{if(c)throw s}}return i}},{key:"push",value:function(){var e;(e=this.list).push.apply(e,arguments)}}]),e}(),_=function(){function e(t,n,r,a,i,o,u){Object(s.a)(this,e);var c=m(b(a,Math.PI),180),f=Math.tan(m(c,2)),h=b(f,i),d=t,p=g(v(t,n)),w=g(k(r,p)),x=k(p,w),M=v(d,b(u,l(l(b(w,h),b(x,f)),p))),y=b(b(b(u,2),w),h),j=b(b(b(u,2),x),f);this.u=w,this.v=x,this.origin=d,this.lowerLeftCorner=M,this.horizontal=y,this.vertical=j,this.lensRadius=m(o,2)}return Object(f.a)(e,[{key:"getRay",value:function(e,t){var n=this.origin,r=this.lowerLeftCorner,a=this.horizontal,i=this.vertical,o=b(this.lensRadius,function(){var e;do{var t=w(Math.random(),Math.random(),0);e=v(b(2,t),w(1,1,0))}while(x(e,e)>=1);return e}()),u=l(b(this.u,o[0]),b(this.v,o[1])),c=v(l(l(r,b(e,a)),b(t,i)),n);return new M(l(n,u),v(c,u))}}]),e}(),A=function(){var e;do{var t=w(Math.random(),Math.random(),Math.random());e=v(b(2,t),w(1,1,1))}while(h.squaredLength(e)>=1);return e},F=function(){function e(t){Object(s.a)(this,e),this.albedo=t}return Object(f.a)(e,[{key:"scatter",value:function(e,t,n){var r=l(l(t.p,t.normal),A()),a=v(r,t.p);return n.scattered=new M(t.p,a),n.attenuation=this.albedo,!0}}]),e}(),z=function(e,t){return v(e,b(b(2,x(e,t)),t))},D=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(s.a)(this,e),this.albedo=t,this.fuzz=Math.min(n,1)}return Object(f.a)(e,[{key:"scatter",value:function(e,t,n){var r=z(h.normalize(h.create(),e.direction()),t.normal);return n.scattered=new M(t.p,l(r,b(this.fuzz,A()))),n.attenuation=this.albedo,x(n.scattered.direction(),t.normal)>0}}]),e}(),I=function(){function e(t){Object(s.a)(this,e),this.refractIndex=t}return Object(f.a)(e,[{key:"scatter",value:function(e,t,n){var r=h.create(),a=z(e.direction(),t.normal),i=0,o=0;n.attenuation=w(1,1,1);var u=x(e.direction(),t.normal);u>0?(r=p(t.normal),i=this.refractIndex,o=m(b(this.refractIndex,u),h.length(e.direction()))):(r=t.normal,i=m(1,this.refractIndex),o=m(p(u),h.length(e.direction())));var c=0;return c=function(e,t,n,r){var a=h.normalize(h.create(),e),i=x(a,t),o=v(1,b(b(n,n),v(1,b(i,i))));return o>0&&(r.refracted=v(b(n,v(a,b(t,i))),b(t,Math.sqrt(o))),!0)}(e.direction(),r,i,n)?function(e,t){var n=m(v(1,t),l(1,t));return n=b(n,n),l(n,b(v(1,n),Math.pow(v(1,e),5)))}(o,this.refractIndex):1,Math.random()<c?n.scattered=new M(t.p,a):n.scattered=new M(t.p,n.refracted),!0}}]),e}(),q=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=y();if(n.hit(t,.001,1/0,a)){var i={scattered:null,attenuation:0};return r>=50||!a.material.scatter(t,a,i)?w(0,0,0):b(i.attenuation,e(i.scattered,n,l(r,1)))}var o,u,c,s=h.normalize(h.create(),t.direction());return o=b(.5,l(s[1],1)),u=w(1,1,1),c=w(.5,.7,1),l(b(v(1,o),u),b(o,c))},R=function(e){var t=e.width,n=void 0===t?800:t,r=e.height,i=void 0===r?400:r,u=e.amount,c=void 0===u?2:u,s=e.lookFrom,f=void 0===s?w(13,2,3):s,d=e.lookAt,x=void 0===d?w(0,0,0):d,k=e.vup,g=void 0===k?w(0,1,0):k,M=e.vfov,y=void 0===M?20:M,A=e.aspect,z=void 0===A?m(n,i):A,R=e.focusDist,E=void 0===R?10:R,C=e.aperture,P=n,S=i,L=new _(f,x,g,y,z,void 0===C?.1:C,E),B=function(e){var t=[],n=Math.floor(m(Math.sqrt(e),2)),r=p(n),a=+n;t[0]=new j(w(0,-1e3,0),1e3,new F(w(.5,.5,.5)));for(var i=1,o=w(4,.2,0),u=r;u<a;u++)for(var c=r;c<a;c++){var s=Math.random(),f=w(l(u,b(.9,Math.random())),.2,l(c,b(.9,Math.random())));if(h.length(v(f,o))>.9)if(s<.8){var d=new F(w(b(Math.random(),Math.random()),b(Math.random(),Math.random()),b(Math.random(),Math.random())));t[i++]=new j(f,.2,d)}else if(s<.95){var x=new D(w(b(.5,l(1,Math.random())),b(.5,l(1,Math.random())),b(.5,l(1,Math.random()))),b(.5,Math.random()));t[i++]=new j(f,.2,x)}else t[i++]=new j(f,.2,new I(1.5))}return t[i++]=new j(w(0,1,0),1,new I(1.5)),t[i++]=new j(w(-4,1,0),1,new F(w(.4,.2,.1))),t[i++]=new j(w(4,1,0),1,new D(w(.7,.6,.5),0)),new O(t)}(c),J=function(e,t){var n=m(l(e,Math.random()),P),r=m(l(t,Math.random()),S),a=L.getRay(n,r);return q(a,B)};return{render:o.a.mark(function e(){var t,n,r,i,u,c,s,f;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=v(S,1);case 1:if(!(t>=0)){e.next=20;break}n=0;case 3:if(!(n<P)){e.next=17;break}return r=J(n,t),i=Object(a.a)(r,3),u=i[0],c=i[1],s=i[2],f=1,e.next=8,u;case 8:return e.next=10,c;case 10:return e.next=12,s;case 12:return e.next=14,f;case 14:n++,e.next=3;break;case 17:t--,e.next=1;break;case 20:case"end":return e.stop()}},e)}),renderByPosition:J}};n.d(t,"default",function(){return H});var E=function(){},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;return new Promise(function(t){requestAnimationFrame(function(){e(),t()})})},P=function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t[r],2);return n/e.length},S=o.a.mark(function e(t,n){var r,a=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=a.length>2&&void 0!==a[2]?a[2]:1;case 1:if(!(t<=n)){e.next=7;break}return e.next=4,t;case 4:t+=r,e.next=1;break;case 7:case"end":return e.stop()}},e)}),L=o.a.mark(function e(t,n){var r,a=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=a.length>2&&void 0!==a[2]?a[2]:-1;case 1:if(!(t>=n)){e.next=7;break}return e.next=4,t;case 4:t+=r,e.next=1;break;case 7:case"end":return e.stop()}},e)}),B=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<t?S(e,t,Math.abs(n)):L(e,t,-Math.abs(n))},J=o.a.mark(function e(t,n){var r,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.next(),a=n.next(),!r.done||!a.done){e.next=5;break}return e.abrupt("break",13);case 5:if(r.done){e.next=8;break}return e.next=8,r.value;case 8:if(a.done){e.next=11;break}return e.next=11,a.value;case 11:e.next=0;break;case 13:case"end":return e.stop()}},e)}),T=o.a.mark(function e(t,n){var r,a,i,u,c,s,f,h,d,l=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=l.length>2&&void 0!==l[2]?l[2]:1,a=Math.floor((n-t)/2),i=J(B(a,t,r),B(a+r,n,r)),u=!0,c=!1,s=void 0,e.prev=6,f=i[Symbol.iterator]();case 8:if(u=(h=f.next()).done){e.next=15;break}return d=h.value,e.next=12,d;case 12:u=!0,e.next=8;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),c=!0,s=e.t0;case 21:e.prev=21,e.prev=22,u||null==f.return||f.return();case 24:if(e.prev=24,!c){e.next=27;break}throw s;case 27:return e.finish(24);case 28:return e.finish(21);case 29:case"end":return e.stop()}},e,null,[[6,17,21,29],[22,,24,28]])}),V=function(e,t){for(var n=[],r=0;r<e.length;r+=4){var a=Math.floor(r/4),i=[e[r+0],e[r+1],e[r+2],e[r+3]],o=[t[r+0],t[r+1],t[r+2],t[r+3]];n[a]={index:a,value:P(i,o)}}return n.sort(function(e,t){return t.value-e.value})},G=function(e){return Math.floor(255.99*Math.sqrt(e))};function H(){var e=Object(u.useState)(0),t=Object(a.a)(e,2),n=t[0],i=t[1],s=Object(u.useRef)(),f=Object(u.useRef)();return Object(u.useEffect)(function(){var e=s.current,t=f.current,n=e.getContext("2d"),u=t.getContext("2d"),c=n.createImageData(800,400),h=u.createImageData(800,400),d=R({width:800,height:400,amount:50}),l=new Float32Array(128e4),v=new Float32Array(128e4),b=new Float32Array(128e4),m=new Float32Array(128e4),p=1,w=0,x=null,k=!1,g=function(){n.fillColor="rgba(0, 0, 0, 1)",n.clearRect(0,0,800,400),n.putImageData(c,0,0)},M=function(){for(var e=m,t=0;t<e.length;t++)h.data[t]=(t+1)%4===0?255:e[t];u.clearRect(0,0,800,400),u.putImageData(h,0,0)},y=function(e,t){var n=d.renderByPosition(e,t),r=Object(a.a)(n,4),i=r[0],o=r[1],u=r[2],s=r[3],f=void 0===s?1:s,h=4*(800*(399-t)+e);l[h+0]+=i,l[h+1]+=o,l[h+2]+=u,l[h+3]+=f,m[h+0]+=1,m[h+1]+=1,m[h+2]+=1,m[h+3]+=1,v[h+0]=c.data[h+0],v[h+1]=c.data[h+1],v[h+2]=c.data[h+2],v[h+3]=c.data[h+3],c.data[h+0]=G(l[h+0]/m[h+0]),c.data[h+1]=G(l[h+1]/m[h+1]),c.data[h+2]=G(l[h+2]/m[h+2]),c.data[h+3]=G(l[h+3]/m[h+3]),b[h+0]=c.data[h+0],b[h+1]=c.data[h+1],b[h+2]=c.data[h+2],b[h+3]=c.data[h+3]},j=function(){var e=Object(r.a)(o.a.mark(function e(){var t,n,r,a,u,c,s,f,h,d,l,v,b,m,_,A=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=A.length>0&&void 0!==A[0]?A[0]:1,n=Date.now(),r=0,a=!0,u=!1,c=void 0,e.prev=6,s=T(0,399,t)[Symbol.iterator]();case 8:if(a=(f=s.next()).done){e.next=45;break}h=f.value,d=!0,l=!1,v=void 0,e.prev=13,b=B(0,799,t)[Symbol.iterator]();case 15:if(d=(m=b.next()).done){e.next=28;break}if(_=m.value,!k){e.next=19;break}return e.abrupt("return");case 19:if(y(_,h),(r=Date.now()-n)%100!==0){e.next=25;break}return i(w+r),e.next=25,C(function(){g(),M()});case 25:d=!0,e.next=15;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(13),l=!0,v=e.t0;case 34:e.prev=34,e.prev=35,d||null==b.return||b.return();case 37:if(e.prev=37,!l){e.next=40;break}throw v;case 40:return e.finish(37);case 41:return e.finish(34);case 42:a=!0,e.next=8;break;case 45:e.next=51;break;case 47:e.prev=47,e.t1=e.catch(6),u=!0,c=e.t1;case 51:e.prev=51,e.prev=52,a||null==s.return||s.return();case 54:if(e.prev=54,!u){e.next=57;break}throw c;case 57:return e.finish(54);case 58:return e.finish(51);case 59:1===t&&(p+=1),g(),M(),i(w+=r),p>2?O():x=requestAnimationFrame(function(){return j()});case 64:case"end":return e.stop()}},e,null,[[6,47,51,59],[13,30,34,42],[35,,37,41],[52,,54,58]])}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(r.a)(o.a.mark(function e(){var t,n,r,a,u,c,s,f,h=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=h.length>0&&void 0!==h[0]?h[0]:0,n=V(v,b),r=Date.now(),a=0,u=0;case 5:if(!(u<2e4)){e.next=20;break}if(c=n[u],s=c.index%800,f=400-Math.floor(c.index/800),y(s,f),(a=Date.now()-r)%100!==0){e.next=15;break}return i(w+a),e.next=15,C(function(){g(),M()});case 15:if(!k){e.next=17;break}return e.abrupt("return");case 17:u++,e.next=5;break;case 20:if(!k){e.next=22;break}return e.abrupt("return");case 22:g(),i(w+=Date.now()-r),x=requestAnimationFrame(function(){t<5?O(t+1):j()});case 25:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return j(3),function(){k=!0,clearTimeout(x)}},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("canvas",{width:800,height:400,ref:s,style:{background:"#000"}}),c.a.createElement("br",null),c.a.createElement("canvas",{width:800,height:400,ref:f}),c.a.createElement("h3",null,"\u5149\u7ebf\u8ffd\u8e2a\u65f6\u95f4\uff1a",(n/1e3).toFixed(2),"\u79d2"))}}}]);
//# sourceMappingURL=8.4f669b8c.chunk.js.map