(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{19:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r})},20:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",function(){return a})},41:function(t,e){},42:function(t,e,n){var r=n(18).vec3,a=function(t){return t instanceof Float32Array},i=function(t){return r.fromValues(t,t,t)};t.exports={_add_:function(t,e){return a(t)||a(e)?(a(t)||(t=i(t)),a(e)||(e=i(e)),r.add(r.create(),t,e)):t+e},_sub_:function(t,e){return a(t)||a(e)?(a(t)||(t=i(t)),a(e)||(e=i(e)),r.sub(r.create(),t,e)):t-e},_mul_:function(t,e){return a(t)||a(e)?(a(t)||(t=i(t)),a(e)||(e=i(e)),r.mul(r.create(),t,e)):t*e},_div_:function(t,e){return a(t)||a(e)?(a(t)||(t=i(t)),a(e)||(e=i(e)),r.div(r.create(),t,e)):t/e},_negate_:function(t){return a(t)?r.negate(r.create(),t):-t}}},75:function(t,e,n){"use strict";n.r(e);var r=n(21),a=n(1),i=n(15),o=n.n(i),u=n(0),c=n.n(u);function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){return(f="function"===typeof Symbol&&"symbol"===s(Symbol.iterator)?function(t){return s(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":s(t)})(t)}function h(t,e){return!e||"object"!==f(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}var b=n(19),m=n(20),p=(n(41),n(18).vec3),w=n(42),x=w._add_,y=w._sub_,k=w._mul_,g=w._div_,M=w._negate_,O=function(t,e,n){return p.fromValues(t,e,n)},j=function(t,e){return p.dot(t,e)},_=function(t,e){return p.cross(p.create(),t,e)},S=function(t){return p.normalize(p.create(),t)},A=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(b.a)(this,t),this.a=e,this.b=n,this.time=r}return Object(m.a)(t,[{key:"origin",value:function(){return this.a}},{key:"direction",value:function(){return this.b}},{key:"pointAt",value:function(t){var e=this.a,n=this.b;return x(e,k(t,n))}}]),t}(),F=function(){return{t:0,p:p.create(),normal:p.create()}},z=function(){function t(e,n,r){Object(b.a)(this,t),this.center=e,this.radius=n,this.material=r}return Object(m.a)(t,[{key:"setCenter",value:function(t){this.center=t}},{key:"hit",value:function(t,e,n,r){var a=y(t.origin(),this.center),i=j(t.direction(),t.direction()),o=j(a,t.direction()),u=y(j(a,a),k(this.radius,this.radius)),c=y(k(o,o),k(i,u));if(c<0)return!1;var s=g(y(M(o),Math.sqrt(c)),i),f=s<n&&s>e;return f||(f=(s=g(x(M(o),Math.sqrt(c)),i))<n&&s>e),!!f&&(r.t=s,r.p=t.pointAt(s),r.normal=g(y(r.p,this.center),this.radius),r.material=this.material,!0)}}]),t}(),D=function(){function t(e,n,r,a,i,o){Object(b.a)(this,t),this.center1=e,this.center2=n,this.time1=r,this.time2=a,this.sphere=new z(e,i,o)}return Object(m.a)(t,[{key:"hit",value:function(t,e,n,r){var a,i,o,u,c,s=(a=this.center1,i=this.center2,o=this.time1,u=this.time2,c=t.time,x(a,k(g(y(c,o),y(u,o)),y(i,a))));return this.sphere.setCenter(s),this.sphere.hit(t,e,n,r)}}]),t}(),I=function(){function t(e){Object(b.a)(this,t),this.list=e}return Object(m.a)(t,[{key:"hit",value:function(t,e,n,r){var a=F(),i=!1,o=n,u=!0,c=!1,s=void 0;try{for(var f,h=this.list[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){f.value.hit(t,e,o,a)&&(i=!0,o=a.t,Object.assign(r,a))}}catch(l){c=!0,s=l}finally{try{u||null==h.return||h.return()}finally{if(c)throw s}}return i}},{key:"push",value:function(){var t;(t=this.list).push.apply(t,arguments)}}]),t}(),q=function(){function t(e,n,r,a,i,o,u,c,s){Object(b.a)(this,t);var f=g(k(a,Math.PI),180),h=Math.tan(g(f,2)),l=k(h,i),d=e,v=S(y(e,n)),m=S(_(r,v)),p=_(v,m),w=y(d,k(u,x(x(k(m,l),k(p,h)),v))),M=k(k(k(u,2),m),l),O=k(k(k(u,2),p),h);this.time1=c,this.time2=s,this.u=m,this.v=p,this.origin=d,this.lowerLeftCorner=w,this.horizontal=M,this.vertical=O,this.lensRadius=g(o,2)}return Object(m.a)(t,[{key:"getRay",value:function(t,e){var n=this.origin,r=this.lowerLeftCorner,a=this.horizontal,i=this.vertical,o=k(this.lensRadius,function(){var t;do{var e=O(Math.random(),Math.random(),0);t=y(k(2,e),O(1,1,0))}while(j(t,t)>=1);return t}()),u=x(k(this.u,o[0]),k(this.v,o[1])),c=y(x(x(r,k(t,a)),k(e,i)),n),s=x(this.time1,k(Math.random(),y(this.time2,this.time1)));return new A(x(n,u),y(c,u),s)}}]),t}(),E=function t(){Object(b.a)(this,t),this.isTexture=!0},P=function(t){function e(t){var n;return Object(b.a)(this,e),(n=h(this,l(e).call(this))).color=t,n}return v(e,E),Object(m.a)(e,[{key:"value",value:function(t,e,n){return this.color}}]),e}(),R=function(t){function e(t,n){var r;return Object(b.a)(this,e),(r=h(this,l(e).call(this))).texture0=t,r.texture1=n,r}return v(e,E),Object(m.a)(e,[{key:"value",value:function(t,e,n){return k(k(Math.sin(k(10,n[0])),Math.sin(k(10,n[1]))),Math.sin(k(10,n[2])))<0?this.texture1.value(t,e,n):this.texture0.value(t,e,n)}}]),e}(),C=function(){var t;do{var e=O(Math.random(),Math.random(),Math.random());t=y(k(2,e),O(1,1,1))}while(p.squaredLength(t)>=1);return t},T=function(){function t(e){Object(b.a)(this,t),this.albedo=e}return Object(m.a)(t,[{key:"scatter",value:function(t,e,n){var r,a=x(x(e.p,e.normal),C()),i=y(a,e.p);return n.scattered=new A(e.p,i,t.time),n.attenuation=(r=this.albedo)&&r.isTexture?this.albedo.value(0,0,e.p):this.albedo,!0}}]),t}(),L=function(t,e){return y(t,k(k(2,j(t,e)),e))},B=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(b.a)(this,t),this.albedo=e,this.fuzz=Math.min(n,1)}return Object(m.a)(t,[{key:"scatter",value:function(t,e,n){var r=L(p.normalize(p.create(),t.direction()),e.normal);return n.scattered=new A(e.p,x(r,k(this.fuzz,C()))),n.attenuation=this.albedo,j(n.scattered.direction(),e.normal)>0}}]),t}(),J=function(){function t(e){Object(b.a)(this,t),this.refractIndex=e}return Object(m.a)(t,[{key:"scatter",value:function(t,e,n){var r=p.create(),a=L(t.direction(),e.normal),i=0,o=0;n.attenuation=O(1,1,1);var u=j(t.direction(),e.normal);u>0?(r=M(e.normal),i=this.refractIndex,o=g(k(this.refractIndex,u),p.length(t.direction()))):(r=e.normal,i=g(1,this.refractIndex),o=g(M(u),p.length(t.direction())));var c=0;return c=function(t,e,n,r){var a=p.normalize(p.create(),t),i=j(a,e),o=y(1,k(k(n,n),y(1,k(i,i))));return o>0&&(r.refracted=y(k(n,y(a,k(e,i))),k(e,Math.sqrt(o))),!0)}(t.direction(),r,i,n)?function(t,e){var n=g(y(1,e),x(1,e));return n=k(n,n),x(n,k(y(1,n),Math.pow(y(1,t),5)))}(o,this.refractIndex):1,Math.random()<c?n.scattered=new A(e.p,a):n.scattered=new A(e.p,n.refracted),!0}}]),t}(),V=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=F();if(n.hit(e,.001,1/0,a)){var i={scattered:null,attenuation:0};return r>=50||!a.material.scatter(e,a,i)?O(0,0,0):k(i.attenuation,t(i.scattered,n,x(r,1)))}var o,u,c,s=p.normalize(p.create(),e.direction());return o=k(.5,x(s[1],1)),u=O(1,1,1),c=O(.5,.7,1),x(k(y(1,o),u),k(o,c))},G=function(t){var e=t.width,n=void 0===e?800:e,r=t.height,i=void 0===r?400:r,u=t.amount,c=void 0===u?2:u,s=t.lookFrom,f=void 0===s?O(13,2,3):s,h=t.lookAt,l=void 0===h?O(0,0,0):h,d=t.vup,v=void 0===d?O(0,1,0):d,b=t.vfov,m=void 0===b?20:b,w=t.aspect,j=void 0===w?g(n,i):w,_=t.focusDist,S=void 0===_?10:_,A=t.aperture,F=n,E=i,C=new q(f,l,v,m,j,void 0===A?.1:A,S,0,1),L=function(t){var e=[],n=Math.floor(g(Math.sqrt(t),2)),r=M(n),a=+n,i=new R(new P(O(.2,.3,.1)),new P(O(.9,.9,.9)));e[0]=new z(O(0,-1e3,0),1e3,new T(i));for(var o=1,u=O(4,.2,0),c=r;c<a;c++)for(var s=r;s<a;s++){var f=Math.random(),h=O(x(c,k(.9,Math.random())),.2,x(s,k(.9,Math.random())));if(p.length(y(h,u))>.9)if(f<.8){var l=new T(O(k(Math.random(),Math.random()),k(Math.random(),Math.random()),k(Math.random(),Math.random())));e[o++]=new D(h,x(h,O(0,k(.5,Math.random()),0)),0,1,.2,l)}else if(f<.95){var d=new B(O(k(.5,x(1,Math.random())),k(.5,x(1,Math.random())),k(.5,x(1,Math.random()))),k(.5,Math.random()));e[o++]=new z(h,.2,d)}else e[o++]=new z(h,.2,new J(1.5))}return e[o++]=new z(O(0,1,0),1,new J(1.5)),e[o++]=new z(O(-4,1,0),1,new T(O(.4,.2,.1))),e[o++]=new z(O(4,1,0),1,new B(O(.7,.6,.5),0)),new I(e)}(c),G=function(t,e){var n=g(x(t,Math.random()),F),r=g(x(e,Math.random()),E),a=C.getRay(n,r);return V(a,L)};return{render:o.a.mark(function t(){var e,n,r,i,u,c,s,f;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=y(E,1);case 1:if(!(e>=0)){t.next=20;break}n=0;case 3:if(!(n<F)){t.next=17;break}return r=G(n,e),i=Object(a.a)(r,3),u=i[0],c=i[1],s=i[2],f=1,t.next=8,u;case 8:return t.next=10,c;case 10:return t.next=12,s;case 12:return t.next=14,f;case 14:n++,t.next=3;break;case 17:e--,t.next=1;break;case 20:case"end":return t.stop()}},t)}),renderByPosition:G}};n.d(e,"default",function(){return tt});var H=function(){},K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;return new Promise(function(e){requestAnimationFrame(function(){t(),e()})})},N=function(t,e){for(var n=0,r=0;r<t.length;r++)n+=Math.pow(t[r]-e[r],2);return n/t.length},Q=o.a.mark(function t(e,n){var r,a=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=a.length>2&&void 0!==a[2]?a[2]:1;case 1:if(!(e<=n)){t.next=7;break}return t.next=4,e;case 4:e+=r,t.next=1;break;case 7:case"end":return t.stop()}},t)}),U=o.a.mark(function t(e,n){var r,a=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=a.length>2&&void 0!==a[2]?a[2]:-1;case 1:if(!(e>=n)){t.next=7;break}return t.next=4,e;case 4:e+=r,t.next=1;break;case 7:case"end":return t.stop()}},t)}),W=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t<e?Q(t,e,Math.abs(n)):U(t,e,-Math.abs(n))},X=o.a.mark(function t(e,n){var r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.next(),a=n.next(),!r.done||!a.done){t.next=5;break}return t.abrupt("break",13);case 5:if(r.done){t.next=8;break}return t.next=8,r.value;case 8:if(a.done){t.next=11;break}return t.next=11,a.value;case 11:t.next=0;break;case 13:case"end":return t.stop()}},t)}),Y=o.a.mark(function t(e,n){var r,a,i,u,c,s,f,h,l,d=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=d.length>2&&void 0!==d[2]?d[2]:1,a=Math.floor((n-e)/2),i=X(W(a,e,r),W(a+r,n,r)),u=!0,c=!1,s=void 0,t.prev=6,f=i[Symbol.iterator]();case 8:if(u=(h=f.next()).done){t.next=15;break}return l=h.value,t.next=12,l;case 12:u=!0,t.next=8;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(6),c=!0,s=t.t0;case 21:t.prev=21,t.prev=22,u||null==f.return||f.return();case 24:if(t.prev=24,!c){t.next=27;break}throw s;case 27:return t.finish(24);case 28:return t.finish(21);case 29:case"end":return t.stop()}},t,null,[[6,17,21,29],[22,,24,28]])}),Z=function(t,e){for(var n=[],r=0;r<t.length;r+=4){var a=Math.floor(r/4),i=[t[r+0],t[r+1],t[r+2],t[r+3]],o=[e[r+0],e[r+1],e[r+2],e[r+3]];n[a]={index:a,value:N(i,o)}}return n.sort(function(t,e){return e.value-t.value})},$=function(t){return Math.floor(255.99*Math.sqrt(t))};function tt(){var t=Object(u.useState)(0),e=Object(a.a)(t,2),n=e[0],i=e[1],s=Object(u.useRef)(),f=Object(u.useRef)();return Object(u.useEffect)(function(){var t=s.current,e=f.current,n=t.getContext("2d"),u=e.getContext("2d"),c=n.createImageData(800,400),h=u.createImageData(800,400),l=G({width:800,height:400,amount:50}),d=new Float32Array(128e4),v=new Float32Array(128e4),b=new Float32Array(128e4),m=new Float32Array(128e4),p=1,w=0,x=null,y=!1,k=function(){n.fillColor="rgba(0, 0, 0, 1)",n.clearRect(0,0,800,400),n.putImageData(c,0,0)},g=function(){for(var t=m,e=0;e<t.length;e++)h.data[e]=(e+1)%4===0?255:t[e];u.clearRect(0,0,800,400),u.putImageData(h,0,0)},M=function(t,e){var n=l.renderByPosition(t,e),r=Object(a.a)(n,4),i=r[0],o=r[1],u=r[2],s=r[3],f=void 0===s?1:s,h=4*(800*(399-e)+t);d[h+0]+=i,d[h+1]+=o,d[h+2]+=u,d[h+3]+=f,m[h+0]+=1,m[h+1]+=1,m[h+2]+=1,m[h+3]+=1,v[h+0]=c.data[h+0],v[h+1]=c.data[h+1],v[h+2]=c.data[h+2],v[h+3]=c.data[h+3],c.data[h+0]=$(d[h+0]/m[h+0]),c.data[h+1]=$(d[h+1]/m[h+1]),c.data[h+2]=$(d[h+2]/m[h+2]),c.data[h+3]=$(d[h+3]/m[h+3]),b[h+0]=c.data[h+0],b[h+1]=c.data[h+1],b[h+2]=c.data[h+2],b[h+3]=c.data[h+3]},O=function(){var t=Object(r.a)(o.a.mark(function t(){var e,n,r,a,u,c,s,f,h,l,d,v,b,m,_,S=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=S.length>0&&void 0!==S[0]?S[0]:1,n=Date.now(),r=0,a=!0,u=!1,c=void 0,t.prev=6,s=Y(0,399,e)[Symbol.iterator]();case 8:if(a=(f=s.next()).done){t.next=45;break}h=f.value,l=!0,d=!1,v=void 0,t.prev=13,b=W(0,799,e)[Symbol.iterator]();case 15:if(l=(m=b.next()).done){t.next=28;break}if(_=m.value,!y){t.next=19;break}return t.abrupt("return");case 19:if(M(_,h),(r=Date.now()-n)%100!==0){t.next=25;break}return i(w+r),t.next=25,K(function(){k(),g()});case 25:l=!0,t.next=15;break;case 28:t.next=34;break;case 30:t.prev=30,t.t0=t.catch(13),d=!0,v=t.t0;case 34:t.prev=34,t.prev=35,l||null==b.return||b.return();case 37:if(t.prev=37,!d){t.next=40;break}throw v;case 40:return t.finish(37);case 41:return t.finish(34);case 42:a=!0,t.next=8;break;case 45:t.next=51;break;case 47:t.prev=47,t.t1=t.catch(6),u=!0,c=t.t1;case 51:t.prev=51,t.prev=52,a||null==s.return||s.return();case 54:if(t.prev=54,!u){t.next=57;break}throw c;case 57:return t.finish(54);case 58:return t.finish(51);case 59:1===e&&(p+=1),k(),g(),i(w+=r),p>2?j():x=requestAnimationFrame(function(){return O()});case 64:case"end":return t.stop()}},t,null,[[6,47,51,59],[13,30,34,42],[35,,37,41],[52,,54,58]])}));return function(){return t.apply(this,arguments)}}(),j=function(){var t=Object(r.a)(o.a.mark(function t(){var e,n,r,a,u,c,s,f,h=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=h.length>0&&void 0!==h[0]?h[0]:0,n=Z(v,b),r=Date.now(),a=0,u=0;case 5:if(!(u<2e4)){t.next=20;break}if(c=n[u],s=c.index%800,f=400-Math.floor(c.index/800),M(s,f),(a=Date.now()-r)%100!==0){t.next=15;break}return i(w+a),t.next=15,K(function(){k(),g()});case 15:if(!y){t.next=17;break}return t.abrupt("return");case 17:u++,t.next=5;break;case 20:if(!y){t.next=22;break}return t.abrupt("return");case 22:k(),i(w+=Date.now()-r),x=requestAnimationFrame(function(){e<5?j(e+1):O()});case 25:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return O(3),function(){y=!0,clearTimeout(x)}},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("canvas",{width:800,height:400,ref:s,style:{background:"#000"}}),c.a.createElement("br",null),c.a.createElement("canvas",{width:800,height:400,ref:f}),c.a.createElement("h3",null,"\u5149\u7ebf\u8ffd\u8e2a\u65f6\u95f4\uff1a",(n/1e3).toFixed(2),"\u79d2"))}}}]);
//# sourceMappingURL=9.54abd353.chunk.js.map