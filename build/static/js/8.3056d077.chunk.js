(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{19:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r})},20:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",function(){return a})},41:function(t,e){},42:function(t,e,n){var r=n(18).vec3,a=function(t){return t instanceof Float32Array},i=function(t){return r.fromValues(t,t,t)};t.exports={_add_:function(t,e){return a(t)||a(e)?(a(t)||(t=i(t)),a(e)||(e=i(e)),r.add(r.create(),t,e)):t+e},_sub_:function(t,e){return a(t)||a(e)?(a(t)||(t=i(t)),a(e)||(e=i(e)),r.sub(r.create(),t,e)):t-e},_mul_:function(t,e){return a(t)||a(e)?(a(t)||(t=i(t)),a(e)||(e=i(e)),r.mul(r.create(),t,e)):t*e},_div_:function(t,e){return a(t)||a(e)?(a(t)||(t=i(t)),a(e)||(e=i(e)),r.div(r.create(),t,e)):t/e},_negate_:function(t){return a(t)?r.negate(r.create(),t):-t}}},79:function(t,e,n){"use strict";n.r(e);var r=n(21),a=n(1),i=n(15),o=n.n(i),c=n(0),u=n.n(c),s=n(19),h=n(20),f=(n(41),n(18).vec3),d=n(42),l=d._add_,v=d._sub_,m=d._mul_,b=d._div_,p=d._negate_,w=function(t,e,n){return f.fromValues(t,e,n)},x=function(t,e){return f.dot(t,e)},k=function(t,e){return f.cross(f.create(),t,e)},g=function(t){return f.normalize(f.create(),t)},M=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(s.a)(this,t),this.a=e,this.b=n,this.time=r}return Object(h.a)(t,[{key:"origin",value:function(){return this.a}},{key:"direction",value:function(){return this.b}},{key:"pointAt",value:function(t){var e=this.a,n=this.b;return l(e,m(t,n))}}]),t}(),y=function(){return{t:0,p:f.create(),normal:f.create()}},j=function(){function t(e,n,r){Object(s.a)(this,t),this.center=e,this.radius=n,this.material=r}return Object(h.a)(t,[{key:"setCenter",value:function(t){this.center=t}},{key:"hit",value:function(t,e,n,r){var a=v(t.origin(),this.center),i=x(t.direction(),t.direction()),o=x(a,t.direction()),c=v(x(a,a),m(this.radius,this.radius)),u=v(m(o,o),m(i,c));if(u<0)return!1;var s=b(v(p(o),Math.sqrt(u)),i),h=s<n&&s>e;return h||(h=(s=b(l(p(o),Math.sqrt(u)),i))<n&&s>e),!!h&&(r.t=s,r.p=t.pointAt(s),r.normal=b(v(r.p,this.center),this.radius),r.material=this.material,!0)}}]),t}(),O=function(){function t(e,n,r,a,i,o){Object(s.a)(this,t),this.center1=e,this.center2=n,this.time1=r,this.time2=a,this.sphere=new j(e,i,o)}return Object(h.a)(t,[{key:"hit",value:function(t,e,n,r){var a,i,o,c,u,s=(a=this.center1,i=this.center2,o=this.time1,c=this.time2,u=t.time,l(a,m(b(v(u,o),v(c,o)),v(i,a))));return this.sphere.setCenter(s),this.sphere.hit(t,e,n,r)}}]),t}(),_=function(){function t(e){Object(s.a)(this,t),this.list=e}return Object(h.a)(t,[{key:"hit",value:function(t,e,n,r){var a=y(),i=!1,o=n,c=!0,u=!1,s=void 0;try{for(var h,f=this.list[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){h.value.hit(t,e,o,a)&&(i=!0,o=a.t,Object.assign(r,a))}}catch(d){u=!0,s=d}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}return i}},{key:"push",value:function(){var t;(t=this.list).push.apply(t,arguments)}}]),t}(),A=function(){function t(e,n,r,a,i,o,c,u,h){Object(s.a)(this,t);var f=b(m(a,Math.PI),180),d=Math.tan(b(f,2)),p=m(d,i),w=e,x=g(v(e,n)),M=g(k(r,x)),y=k(x,M),j=v(w,m(c,l(l(m(M,p),m(y,d)),x))),O=m(m(m(c,2),M),p),_=m(m(m(c,2),y),d);this.time1=u,this.time2=h,this.u=M,this.v=y,this.origin=w,this.lowerLeftCorner=j,this.horizontal=O,this.vertical=_,this.lensRadius=b(o,2)}return Object(h.a)(t,[{key:"getRay",value:function(t,e){var n=this.origin,r=this.lowerLeftCorner,a=this.horizontal,i=this.vertical,o=m(this.lensRadius,function(){var t;do{var e=w(Math.random(),Math.random(),0);t=v(m(2,e),w(1,1,0))}while(x(t,t)>=1);return t}()),c=l(m(this.u,o[0]),m(this.v,o[1])),u=v(l(l(r,m(t,a)),m(e,i)),n),s=l(this.time1,m(Math.random(),v(this.time2,this.time1)));return new M(l(n,c),v(u,c),s)}}]),t}(),F=function(){var t;do{var e=w(Math.random(),Math.random(),Math.random());t=v(m(2,e),w(1,1,1))}while(f.squaredLength(t)>=1);return t},z=function(){function t(e){Object(s.a)(this,t),this.albedo=e}return Object(h.a)(t,[{key:"scatter",value:function(t,e,n){var r=l(l(e.p,e.normal),F()),a=v(r,e.p);return n.scattered=new M(e.p,a,t.time),n.attenuation=this.albedo,!0}}]),t}(),D=function(t,e){return v(t,m(m(2,x(t,e)),e))},I=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(s.a)(this,t),this.albedo=e,this.fuzz=Math.min(n,1)}return Object(h.a)(t,[{key:"scatter",value:function(t,e,n){var r=D(f.normalize(f.create(),t.direction()),e.normal);return n.scattered=new M(e.p,l(r,m(this.fuzz,F()))),n.attenuation=this.albedo,x(n.scattered.direction(),e.normal)>0}}]),t}(),q=function(){function t(e){Object(s.a)(this,t),this.refractIndex=e}return Object(h.a)(t,[{key:"scatter",value:function(t,e,n){var r=f.create(),a=D(t.direction(),e.normal),i=0,o=0;n.attenuation=w(1,1,1);var c=x(t.direction(),e.normal);c>0?(r=p(e.normal),i=this.refractIndex,o=b(m(this.refractIndex,c),f.length(t.direction()))):(r=e.normal,i=b(1,this.refractIndex),o=b(p(c),f.length(t.direction())));var u=0;return u=function(t,e,n,r){var a=f.normalize(f.create(),t),i=x(a,e),o=v(1,m(m(n,n),v(1,m(i,i))));return o>0&&(r.refracted=v(m(n,v(a,m(e,i))),m(e,Math.sqrt(o))),!0)}(t.direction(),r,i,n)?function(t,e){var n=b(v(1,e),l(1,e));return n=m(n,n),l(n,m(v(1,n),Math.pow(v(1,t),5)))}(o,this.refractIndex):1,Math.random()<u?n.scattered=new M(e.p,a):n.scattered=new M(e.p,n.refracted),!0}}]),t}(),C=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=y();if(n.hit(e,.001,1/0,a)){var i={scattered:null,attenuation:0};return r>=50||!a.material.scatter(e,a,i)?w(0,0,0):m(i.attenuation,t(i.scattered,n,l(r,1)))}var o,c,u,s=f.normalize(f.create(),e.direction());return o=m(.5,l(s[1],1)),c=w(1,1,1),u=w(.5,.7,1),l(m(v(1,o),c),m(o,u))},R=function(t){var e=t.width,n=void 0===e?800:e,r=t.height,i=void 0===r?400:r,c=t.amount,u=void 0===c?2:c,s=t.lookFrom,h=void 0===s?w(13,2,3):s,d=t.lookAt,x=void 0===d?w(0,0,0):d,k=t.vup,g=void 0===k?w(0,1,0):k,M=t.vfov,y=void 0===M?20:M,F=t.aspect,D=void 0===F?b(n,i):F,R=t.focusDist,E=void 0===R?10:R,P=t.aperture,S=n,L=i,B=new A(h,x,g,y,D,void 0===P?.1:P,E,0,1),J=function(t){var e=[],n=Math.floor(b(Math.sqrt(t),2)),r=p(n),a=+n;e[0]=new j(w(0,-1e3,0),1e3,new z(w(.5,.5,.5)));for(var i=1,o=w(4,.2,0),c=r;c<a;c++)for(var u=r;u<a;u++){var s=Math.random(),h=w(l(c,m(.9,Math.random())),.2,l(u,m(.9,Math.random())));if(f.length(v(h,o))>.9)if(s<.8){var d=new z(w(m(Math.random(),Math.random()),m(Math.random(),Math.random()),m(Math.random(),Math.random())));e[i++]=new O(h,l(h,w(0,m(.5,Math.random()),0)),0,1,.2,d)}else if(s<.95){var x=new I(w(m(.5,l(1,Math.random())),m(.5,l(1,Math.random())),m(.5,l(1,Math.random()))),m(.5,Math.random()));e[i++]=new j(h,.2,x)}else e[i++]=new j(h,.2,new q(1.5))}return e[i++]=new j(w(0,1,0),1,new q(1.5)),e[i++]=new j(w(-4,1,0),1,new z(w(.4,.2,.1))),e[i++]=new j(w(4,1,0),1,new I(w(.7,.6,.5),0)),new _(e)}(u),T=function(t,e){var n=b(l(t,Math.random()),S),r=b(l(e,Math.random()),L),a=B.getRay(n,r);return C(a,J)};return{render:o.a.mark(function t(){var e,n,r,i,c,u,s,h;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=v(L,1);case 1:if(!(e>=0)){t.next=20;break}n=0;case 3:if(!(n<S)){t.next=17;break}return r=T(n,e),i=Object(a.a)(r,3),c=i[0],u=i[1],s=i[2],h=1,t.next=8,c;case 8:return t.next=10,u;case 10:return t.next=12,s;case 12:return t.next=14,h;case 14:n++,t.next=3;break;case 17:e--,t.next=1;break;case 20:case"end":return t.stop()}},t)}),renderByPosition:T}};n.d(e,"default",function(){return K});var E=function(){},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;return new Promise(function(e){requestAnimationFrame(function(){t(),e()})})},S=function(t,e){for(var n=0,r=0;r<t.length;r++)n+=Math.pow(t[r]-e[r],2);return n/t.length},L=o.a.mark(function t(e,n){var r,a=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=a.length>2&&void 0!==a[2]?a[2]:1;case 1:if(!(e<=n)){t.next=7;break}return t.next=4,e;case 4:e+=r,t.next=1;break;case 7:case"end":return t.stop()}},t)}),B=o.a.mark(function t(e,n){var r,a=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=a.length>2&&void 0!==a[2]?a[2]:-1;case 1:if(!(e>=n)){t.next=7;break}return t.next=4,e;case 4:e+=r,t.next=1;break;case 7:case"end":return t.stop()}},t)}),J=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t<e?L(t,e,Math.abs(n)):B(t,e,-Math.abs(n))},T=o.a.mark(function t(e,n){var r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.next(),a=n.next(),!r.done||!a.done){t.next=5;break}return t.abrupt("break",13);case 5:if(r.done){t.next=8;break}return t.next=8,r.value;case 8:if(a.done){t.next=11;break}return t.next=11,a.value;case 11:t.next=0;break;case 13:case"end":return t.stop()}},t)}),V=o.a.mark(function t(e,n){var r,a,i,c,u,s,h,f,d,l=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=l.length>2&&void 0!==l[2]?l[2]:1,a=Math.floor((n-e)/2),i=T(J(a,e,r),J(a+r,n,r)),c=!0,u=!1,s=void 0,t.prev=6,h=i[Symbol.iterator]();case 8:if(c=(f=h.next()).done){t.next=15;break}return d=f.value,t.next=12,d;case 12:c=!0,t.next=8;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(6),u=!0,s=t.t0;case 21:t.prev=21,t.prev=22,c||null==h.return||h.return();case 24:if(t.prev=24,!u){t.next=27;break}throw s;case 27:return t.finish(24);case 28:return t.finish(21);case 29:case"end":return t.stop()}},t,null,[[6,17,21,29],[22,,24,28]])}),G=function(t,e){for(var n=[],r=0;r<t.length;r+=4){var a=Math.floor(r/4),i=[t[r+0],t[r+1],t[r+2],t[r+3]],o=[e[r+0],e[r+1],e[r+2],e[r+3]];n[a]={index:a,value:S(i,o)}}return n.sort(function(t,e){return e.value-t.value})},H=function(t){return Math.floor(255.99*Math.sqrt(t))};function K(){var t=Object(c.useState)(0),e=Object(a.a)(t,2),n=e[0],i=e[1],s=Object(c.useRef)(),h=Object(c.useRef)();return Object(c.useEffect)(function(){var t=s.current,e=h.current,n=t.getContext("2d"),c=e.getContext("2d"),u=n.createImageData(800,400),f=c.createImageData(800,400),d=R({width:800,height:400,amount:50}),l=new Float32Array(128e4),v=new Float32Array(128e4),m=new Float32Array(128e4),b=new Float32Array(128e4),p=1,w=0,x=null,k=!1,g=function(){n.fillColor="rgba(0, 0, 0, 1)",n.clearRect(0,0,800,400),n.putImageData(u,0,0)},M=function(){for(var t=b,e=0;e<t.length;e++)f.data[e]=(e+1)%4===0?255:t[e];c.clearRect(0,0,800,400),c.putImageData(f,0,0)},y=function(t,e){var n=d.renderByPosition(t,e),r=Object(a.a)(n,4),i=r[0],o=r[1],c=r[2],s=r[3],h=void 0===s?1:s,f=4*(800*(399-e)+t);l[f+0]+=i,l[f+1]+=o,l[f+2]+=c,l[f+3]+=h,b[f+0]+=1,b[f+1]+=1,b[f+2]+=1,b[f+3]+=1,v[f+0]=u.data[f+0],v[f+1]=u.data[f+1],v[f+2]=u.data[f+2],v[f+3]=u.data[f+3],u.data[f+0]=H(l[f+0]/b[f+0]),u.data[f+1]=H(l[f+1]/b[f+1]),u.data[f+2]=H(l[f+2]/b[f+2]),u.data[f+3]=H(l[f+3]/b[f+3]),m[f+0]=u.data[f+0],m[f+1]=u.data[f+1],m[f+2]=u.data[f+2],m[f+3]=u.data[f+3]},j=function(){var t=Object(r.a)(o.a.mark(function t(){var e,n,r,a,c,u,s,h,f,d,l,v,m,b,_,A=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=A.length>0&&void 0!==A[0]?A[0]:1,n=Date.now(),r=0,a=!0,c=!1,u=void 0,t.prev=6,s=V(0,399,e)[Symbol.iterator]();case 8:if(a=(h=s.next()).done){t.next=45;break}f=h.value,d=!0,l=!1,v=void 0,t.prev=13,m=J(0,799,e)[Symbol.iterator]();case 15:if(d=(b=m.next()).done){t.next=28;break}if(_=b.value,!k){t.next=19;break}return t.abrupt("return");case 19:if(y(_,f),(r=Date.now()-n)%100!==0){t.next=25;break}return i(w+r),t.next=25,P(function(){g(),M()});case 25:d=!0,t.next=15;break;case 28:t.next=34;break;case 30:t.prev=30,t.t0=t.catch(13),l=!0,v=t.t0;case 34:t.prev=34,t.prev=35,d||null==m.return||m.return();case 37:if(t.prev=37,!l){t.next=40;break}throw v;case 40:return t.finish(37);case 41:return t.finish(34);case 42:a=!0,t.next=8;break;case 45:t.next=51;break;case 47:t.prev=47,t.t1=t.catch(6),c=!0,u=t.t1;case 51:t.prev=51,t.prev=52,a||null==s.return||s.return();case 54:if(t.prev=54,!c){t.next=57;break}throw u;case 57:return t.finish(54);case 58:return t.finish(51);case 59:1===e&&(p+=1),g(),M(),i(w+=r),p>2?O():x=requestAnimationFrame(function(){return j()});case 64:case"end":return t.stop()}},t,null,[[6,47,51,59],[13,30,34,42],[35,,37,41],[52,,54,58]])}));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(r.a)(o.a.mark(function t(){var e,n,r,a,c,u,s,h,f=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=f.length>0&&void 0!==f[0]?f[0]:0,n=G(v,m),r=Date.now(),a=0,c=0;case 5:if(!(c<2e4)){t.next=20;break}if(u=n[c],s=u.index%800,h=400-Math.floor(u.index/800),y(s,h),(a=Date.now()-r)%100!==0){t.next=15;break}return i(w+a),t.next=15,P(function(){g(),M()});case 15:if(!k){t.next=17;break}return t.abrupt("return");case 17:c++,t.next=5;break;case 20:if(!k){t.next=22;break}return t.abrupt("return");case 22:g(),i(w+=Date.now()-r),x=requestAnimationFrame(function(){e<5?O(e+1):j()});case 25:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return j(3),function(){k=!0,clearTimeout(x)}},[]),u.a.createElement(u.a.Fragment,null,u.a.createElement("canvas",{width:800,height:400,ref:s,style:{background:"#000"}}),u.a.createElement("br",null),u.a.createElement("canvas",{width:800,height:400,ref:h}),u.a.createElement("h3",null,"\u5149\u7ebf\u8ffd\u8e2a\u65f6\u95f4\uff1a",(n/1e3).toFixed(2),"\u79d2"))}}}]);
//# sourceMappingURL=8.3056d077.chunk.js.map